%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,12pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}
%% turn off hyperref patch of \index as sphinx.xdy xindy module takes care of
%% suitable \hyperpage mark-up, working around hyperref-xindy incompatibility
\PassOptionsToPackage{hyperindex=false}{hyperref}
%% memoir class requires extra handling
\makeatletter\@ifclassloaded{memoir}
{\ifdefined\memhyperindexfalse\memhyperindexfalse\fi}{}\makeatother

\PassOptionsToPackage{warn}{textcomp}

\catcode`^^^^00a0\active\protected\def^^^^00a0{\leavevmode\nobreak\ }
\usepackage{cmap}
\usepackage{xeCJK}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\setmainfont{FreeSerif}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Italic,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldItalic
]
\setsansfont{FreeSans}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]
\setmonofont{FreeMono}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]



\usepackage[Sonny]{fncychap}
\ChNameVar{\Large\normalfont\sffamily}
\ChTitleVar{\Large\normalfont\sffamily}
\usepackage{sphinx}

\fvset{fontsize=\small,formatcom=\xeCJKVerbAddon}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Contents}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}


\usepackage{xeCJK}
\usepackage{indentfirst}
\usepackage{times}
\setCJKmainfont[BoldFont=STZhongsong, ItalicFont=STKaiti]{STSong}
\setCJKsansfont[BoldFont=SimHei]{STXihei}
\setCJKmonofont{STFangsong}
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt
\parindent 2em
\definecolor{VerbatimColor}{rgb}{0.95,0.95,0.95}
\setcounter{tocdepth}{3}
\renewcommand\familydefault{\ttdefault}
\renewcommand\CJKfamilydefault{\CJKrmdefault}


\title{Physics}
\date{2021 年 11 月 11 日}
\release{1.00}
\author{Yong He}
\newcommand{\sphinxlogo}{\sphinxincludegraphics{logo.png}\par}
\renewcommand{\releasename}{发布}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\chapter{Overview}
\label{\detokenize{welcome:overview}}\label{\detokenize{welcome::doc}}
\sphinxAtStartPar
This Blog aims at providing some useful installation tips and first\sphinxhyphen{}principles calculations details.

\begin{DUlineblock}{0em}
\item[] About Me
\item[] Yong He (贺勇)
\item[] Ph. D Student.
\item[] Department of Physics, Peking University
\item[] Beijing 100871, China.
\item[] E\sphinxhyphen{}mail：\sphinxhref{mailto:hey@stu.pku.edu.cn}{hey@stu.pku.edu.cn}
\item[] Scholar Page: \sphinxurl{http://scholar.pku.edu.cn/yong\_phys}
\end{DUlineblock}


\chapter{Installation}
\label{\detokenize{compile:installation}}\label{\detokenize{compile::doc}}

\section{libbeef}
\label{\detokenize{compile:libbeef}}
\sphinxAtStartPar
Compile libbeef using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/libbeef:download-and-install}}\label{\detokenize{compile/libbeef::doc}}

\subsubsection{Download}
\label{\detokenize{compile/libbeef:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version master}}%
\begin{footnote}[1]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/vossjo/libbeef}
%
\end{footnote} of libbeef.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone https://github.com/vossjo/libbeef.git
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/libbeef:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{CC}\PYG{o}{=}icc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/libbeef/build \PYG{l+s+se}{\PYGZbs{}}
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure libbeef

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test libbeef

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make install
\end{sphinxVerbatim}


\section{libxc}
\label{\detokenize{compile:libxc}}
\sphinxAtStartPar
Compile libxc\sphinxhyphen{}4.3.4 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/libxc_4.3.4:download-and-install}}\label{\detokenize{compile/libxc_4.3.4::doc}}

\subsubsection{Download}
\label{\detokenize{compile/libxc_4.3.4:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 4.3.4}}%
\begin{footnote}[2]\sphinxAtStartFootnote
\sphinxnolinkurl{http://www.tddft.org/programs/libxc/down.php?file=4.3.4/libxc-4.3.4.tar.gz}
%
\end{footnote} of libxc.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget http://www.tddft.org/programs/libxc/down.php?file\PYG{o}{=}\PYG{l+m}{4}.3.4/libxc\PYGZhy{}4.3.4.tar.gz
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/libxc_4.3.4:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{AR}\PYG{o}{=}ar \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{FC}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F77}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F90}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{CC}\PYG{o}{=}icc
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure libxc

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make Install
\end{sphinxVerbatim}


\section{hdf5}
\label{\detokenize{compile:hdf5}}
\sphinxAtStartPar
Compile hdf5\sphinxhyphen{}1.12.0 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/hdf5_1.12.0:download-and-install}}\label{\detokenize{compile/hdf5_1.12.0::doc}}

\subsubsection{Download}
\label{\detokenize{compile/hdf5_1.12.0:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 4.3.4}}%
\begin{footnote}[3]\sphinxAtStartFootnote
\sphinxnolinkurl{http://www.tddft.org/programs/libxc/down.php?file=4.3.4/libxc-4.3.4.tar.gz}
%
\end{footnote} of libxc.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget http://www.tddft.org/programs/libxc/down.php?file\PYG{o}{=}\PYG{l+m}{4}.3.4/libxc\PYGZhy{}4.3.4.tar.gz
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/hdf5_1.12.0:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{AR}\PYG{o}{=}ar \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{FC}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F77}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F90}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{CC}\PYG{o}{=}icc
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure libxc

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make Install
\end{sphinxVerbatim}


\section{Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{compile:quantum-espresso}}
\sphinxAtStartPar
Compile Quantum ESPRESSO\sphinxhyphen{}6.7, including EPW and thermo\_pw codes, using Intel Parallel Studio Xe 2020\_update4 with libbeef, libxc\sphinxhyphen{}4.3.4 and HDF5\sphinxhyphen{}1.12.0 packsges


\subsection{Download and Install}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:download-and-install}}\label{\detokenize{compile/Quantum-ESPRESSO_6.7::doc}}

\subsubsection{Download}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 6.7}}%
\begin{footnote}[4]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/QEF/q-e/releases/download/qe-6.7.0/qe-6.7-ReleasePack.tgz}
%
\end{footnote} of Quantum\sphinxhyphen{}ESPRESSO.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://github.com/QEF/q\PYGZhy{}e/releases/download/qe\PYGZhy{}6.7.0/qe\PYGZhy{}6.7\PYGZhy{}ReleasePack.tgz
\end{sphinxVerbatim}

\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
One should also download the thermo\_pw \sphinxcode{\sphinxupquote{version 1.4.1}}%
\begin{footnote}[5]\sphinxAtStartFootnote
\sphinxnolinkurl{http://people.sissa.it/~dalcorso/thermo\_pw/thermo\_pw.1.4.1.tar.gz}
%
\end{footnote} and Wannier90 \sphinxcode{\sphinxupquote{version 3.1.0}}%
\begin{footnote}[6]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/wannier-developers/wannier90/archive/v3.1.0.tar.gz}
%
\end{footnote} codes
\end{sphinxadmonition}


\subsubsection{Compile}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:compile}}
\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
Before compile Quantum\sphinxhyphen{}ESPRESSO package, one should compile the {\hyperref[\detokenize{compile/libbeef::doc}]{\sphinxcrossref{\DUrole{doc}{libbeef}}}}, {\hyperref[\detokenize{compile/libxc_4.3.4::doc}]{\sphinxcrossref{\DUrole{doc}{libxc\_4.3.4}}}} and {\hyperref[\detokenize{compile/hdf5_1.12.0::doc}]{\sphinxcrossref{\DUrole{doc}{hdf5\_1.12.0}}}}
\end{sphinxadmonition}


\paragraph{preparation}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:preparation}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Unpack qe\sphinxhyphen{}6.7\sphinxhyphen{}ReleasePack

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf qe\PYGZhy{}6.7\PYGZhy{}ReleasePack.tgz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} qe\PYGZhy{}6.7/test\PYGZhy{}suite
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Edit the check\_pseudo.sh file as follows

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Copyright (C) 2001\PYGZhy{}2016 Quantum ESPRESSO group}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} This program is free software; you can redistribute it and/or}
\PYG{c+c1}{\PYGZsh{} modify it under the terms of the GNU General Public License}
\PYG{c+c1}{\PYGZsh{} as published by the Free Software Foundation; either version 2}
\PYG{c+c1}{\PYGZsh{} of the License. See the file \PYGZsq{}License\PYGZsq{} in the root directory}
\PYG{c+c1}{\PYGZsh{} of the present distribution.}

\PYG{k}{if} \PYG{n+nb}{test} \PYG{l+s+s2}{\PYGZdq{}`which curl`\PYGZdq{}} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}} \PYG{p}{;} \PYG{k}{then}
   \PYG{k}{if} \PYG{n+nb}{test} \PYG{l+s+s2}{\PYGZdq{}`which wget`\PYGZdq{}} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}} \PYG{p}{;} \PYG{k}{then}
      \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}\PYGZsh{}\PYGZsh{}\PYGZsh{} wget or curl not found: will not be able to download missing PP \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZdq{}}
   \PYG{k}{else}
      \PYG{n+nv}{DOWNLOADER}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}wget \PYGZhy{}O\PYGZdq{}}
      \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}wget found\PYGZdq{}}
   \PYG{k}{fi}
\PYG{k}{else}
   \PYG{n+nv}{DOWNLOADER}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}o\PYGZdq{}}
   \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}curl found\PYGZdq{}}
\PYG{k}{fi}

\PYG{n+nv}{inputs}\PYG{o}{=}\PYG{l+s+sb}{`}find \PYG{n+nv}{\PYGZdl{}1}* \PYGZhy{}type f \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}*.in\PYGZdq{}} \PYGZhy{}not \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}test.*\PYGZdq{}} \PYGZhy{}not \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}benchmark.*\PYGZdq{}}\PYG{l+s+sb}{`}
\PYG{n+nv}{pp\PYGZus{}files}\PYG{o}{=}\PYG{l+s+sb}{`}\PYG{k}{for} x \PYG{k}{in} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{inputs}\PYG{l+s+si}{\PYGZcb{}}\PYG{p}{;} \PYG{k}{do} grep UPF \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{x}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{|} awk \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}print \PYGZdl{}3\PYGZcb{}\PYGZsq{}}\PYG{p}{;} \PYG{k}{done}\PYG{l+s+sb}{`}

\PYG{k}{for} pp\PYGZus{}file \PYG{k}{in} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}files}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{;} \PYG{k}{do}
\PYG{k}{if} ! \PYG{n+nb}{test} \PYGZhy{}f \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{;} \PYG{k}{then}
    \PYG{n+nb}{echo} \PYGZhy{}n \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Downloading }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ to }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ ... }\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{DOWNLOADER}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{NETWORK\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+m}{2}\PYGZgt{} /dev/null
    \PYG{k}{if} \PYG{n+nb}{test} \PYG{n+nv}{\PYGZdl{}?} !\PYG{o}{=} \PYG{l+m}{0} \PYG{p}{;} \PYG{k}{then}
        \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}Download of\PYGZdq{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+s2}{\PYGZdq{}FAILED, do it manually \PYGZhy{}\PYGZhy{} Testing aborted!\PYGZdq{}}
        \PYG{n+nb}{exit} \PYGZhy{}1
    \PYG{k}{else}
        \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}done.\PYGZdq{}}
    \PYG{k}{fi}
\PYG{k}{else}
    \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{No need to download }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{.}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{k}{fi}
\PYG{k}{done}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Download the pseudopotentials

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make pseudo
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Unpack the thermo\_pw and move it into Quantum\sphinxhyphen{}ESPRESSO main direction

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf thermo\PYGZus{}pw.1.4.1.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} mv thermo\PYGZus{}pw qe\PYGZhy{}6.7
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Rename the Wannier90 code and move it into Quantum\sphinxhyphen{}ESPRESSO

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mv wannier90\PYGZhy{}3.1.0.tar.gz v3.1.0 \PYG{o}{\PYGZam{}\PYGZam{}} mv v3.1.0 qe\PYGZhy{}6.7/archive/
\end{sphinxVerbatim}


\paragraph{Compile Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:compile-quantum-espresso}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{MPIF90}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{n+nv}{F90}\PYG{o}{=}ifort \PYG{n+nv}{F77}\PYG{o}{=}mpiifort \PYGZhy{}enable\PYGZhy{}parallel \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYGZhy{}prefix\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYGZhy{}include\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin/include \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}scalapack\PYG{o}{=}intel \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libs\PYG{o}{=}/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}include\PYG{o}{=}/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/include \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libbeef\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libbeef\PYGZhy{}prefix\PYG{o}{=}/opt/software/libbeef/build/lib
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
Edit the make.inc file

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{43}  \PYG{n+nv}{DFLAGS}         \PYG{o}{=}  \PYGZhy{}D\PYGZus{}\PYGZus{}DFTI \PYGZhy{}D\PYGZus{}\PYGZus{}LIBXC \PYGZhy{}D\PYGZus{}\PYGZus{}MPI \PYGZhy{}D\PYGZus{}\PYGZus{}SCALAPACK \PYGZhy{}D\PYGZus{}\PYGZus{}NOBEEF
\PYG{l+m}{109} \PYG{n+nv}{FFLAGS}         \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}assume byterecl \PYGZhy{}g \PYGZhy{}traceback \PYGZhy{}xhost
\PYG{l+m}{124} \PYG{n+nv}{LD\PYGZus{}LIBS}        \PYG{o}{=} \PYGZhy{}L/opt/software/libxc\PYGZhy{}4.3.4/bin/lib \PYGZhy{}lxcf03 \PYGZhy{}lxc
\PYG{l+m}{131} \PYG{n+nv}{BLAS\PYGZus{}LIBS}      \PYG{o}{=}   \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{137} \PYG{n+nv}{LAPACK\PYGZus{}LIBS}    \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{140} \PYG{n+nv}{SCALAPACK\PYGZus{}LIBS} \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{145} \PYG{n+nv}{FFT\PYGZus{}LIBS}       \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{148} \PYG{n+nv}{HDF5\PYGZus{}LIBS} \PYG{o}{=} \PYGZhy{}L/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYGZhy{}lhdf5
\PYG{l+m}{155} \PYG{n+nv}{MPI\PYGZus{}LIBS}       \PYG{o}{=} \PYGZhy{}L/opt/intel/impi/2019.9.304/intel64/lib \PYGZhy{}lmpi
\PYG{l+m}{163} \PYG{n+nv}{BEEF\PYGZus{}LIBS}      \PYG{o}{=} /opt/software/libbeef/build/lib/libbeef.a
\PYG{l+m}{164} \PYG{n+nv}{BEEF\PYGZus{}LIBS\PYGZus{}SWITCH} \PYG{o}{=} internal
\PYG{l+m}{185} \PYG{n+nv}{LIBXC\PYGZus{}LIBS}     \PYG{o}{=} \PYGZhy{}L/opt/software/libxc\PYGZhy{}4.3.4/bin/lib \PYGZhy{}lxcf03 \PYGZhy{}lxc
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
compile Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{pp}\PYG{o}{=}\PYG{l+m}{4}
make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pw \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} ph \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} hp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pwcond \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} neb \PYG{l+s+se}{\PYGZbs{}}
    \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} cp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} tddfpt \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} gwl \PYG{l+s+se}{\PYGZbs{}}
    \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} ld1 \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} xspectra \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} couple \PYG{o}{\PYGZam{}\PYGZam{}} make epw

\PYG{n+nb}{cd} thermo\PYGZus{}pw \PYG{o}{\PYGZam{}\PYGZam{}} make join\PYGZus{}qe \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} ../ \PYG{o}{\PYGZam{}\PYGZam{}} make thermo\PYGZus{}pw
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
test Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} test\PYGZhy{}suite \PYG{o}{\PYGZam{}\PYGZam{}} make run\PYGZhy{}tests\PYGZhy{}parallel
\end{sphinxVerbatim}


\section{ABINIT}
\label{\detokenize{compile:abinit}}
\sphinxAtStartPar
Compile abinit\sphinxhyphen{}9.4.2 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/abinit_9.4.2:download-and-install}}\label{\detokenize{compile/abinit_9.4.2::doc}}

\subsubsection{Download}
\label{\detokenize{compile/abinit_9.4.2:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 9.4.2}}%
\begin{footnote}[7]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.abinit.org/sites/default/files/packages/abinit-9.4.2.tar.gz}
%
\end{footnote} of abinit.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://www.abinit.org/sites/default/files/packages/abinit\PYGZhy{}9.4.2.tar.gz
\end{sphinxVerbatim}

\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
One should also download the recommended ABINIT Fallbacks
\end{sphinxadmonition}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{Fallbacks}}%
\begin{footnote}[8]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.abinit.org/fallbacks}
%
\end{footnote} of abinit\sphinxhyphen{}9.4.2

\end{enumerate}


\subsubsection{Compile}
\label{\detokenize{compile/abinit_9.4.2:compile}}
\sphinxAtStartPar
Before compile abinit package, one should create a installation direction and copy the abinit and wannier90 to this direction. Next, one should build a tarballs by following command.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mkdir \PYGZhy{}p \PYGZti{}/.abinit/tarballs
\end{sphinxVerbatim}

\sphinxAtStartPar
Move the packages of above download (exclude wannier90) to tarballs.


\paragraph{Compile wannier90}
\label{\detokenize{compile/abinit_9.4.2:compile-wannier90}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Unpack and configure wannier90. This can be done by copy/pasting the following lines:

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf wannier90\PYGZhy{}2.0.1.1.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nb}{cd} wannier90\PYGZhy{}2.0.1.1 \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{prefix}\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build/ \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
make \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
make install
\end{sphinxVerbatim}


\paragraph{Compile abinit}
\label{\detokenize{compile/abinit_9.4.2:compile-abinit}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/build \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}io\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}with\PYGZhy{}mpi\PYG{o}{=}/opt/intel/impi/2019.9.304/intel64 \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}inplace\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}openmp\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}bse\PYGZhy{}unpacked\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}gw\PYGZhy{}dpc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}with\PYGZhy{}wannier90\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile fallbacks by following commands

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} fallbacks \PYG{o}{\PYGZam{}\PYGZam{}} bash build\PYGZhy{}abinit\PYGZhy{}fallbacks.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
edit the compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/build \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}io\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}mpi\PYG{o}{=}/opt/intel/impi/2019.9.304/intel64 \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}inplace\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}openmp\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}bse\PYGZhy{}unpacked\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}gw\PYGZhy{}dpc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}wannier90\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}libxc}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/libxc/4.3.4 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}hdf5}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/hdf5/1.10.6 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}netcdf}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/netcdf4/4.6.3 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}netcdf\PYGZus{}fortran}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/netcdf4\PYGZus{}fortran/4.5.2 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}xmlf90}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/xmlf90/1.5.3.1 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}libpsml}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/libpsml/1.1.7
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
configure abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{5}
\item {} 
\sphinxAtStartPar
compile abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYGZhy{}j\PYGZlt{}n\PYGZgt{} \PYG{o}{\PYGZam{}\PYGZam{}} make install
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{6}
\item {} 
\sphinxAtStartPar
test abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./runtests.py v1 \PYGZhy{}j4
\end{sphinxVerbatim}

\sphinxAtStartPar
The test results are as follows.

\noindent\sphinxincludegraphics{{abinit_test_v1}.png}


\section{Yambo}
\label{\detokenize{compile:yambo}}
\sphinxAtStartPar
Compile Yambo\sphinxhyphen{}5.0.2 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/yambo_5.0.2:download-and-install}}\label{\detokenize{compile/yambo_5.0.2::doc}}

\subsubsection{Download}
\label{\detokenize{compile/yambo_5.0.2:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 5.0.2}}%
\begin{footnote}[9]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/yambo-code/yambo/archive/5.0.2.tar.gz}
%
\end{footnote} of Yambo.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://github.com/yambo\PYGZhy{}code/yambo/archive/5.0.2.tar.gz
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
One should also download the dependent packages of Yambo by following commands

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf yambo\PYGZhy{}5.0.2.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} yambo\PYGZhy{}5.0.2/lib/archive \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
    make \PYGZhy{}f Makefile.loc
\end{sphinxVerbatim}

\begin{sphinxadmonition}{important}{重要:}
\sphinxAtStartPar
The yambo\sphinxhyphen{}libraries\sphinxhyphen{}0.0.2.tar.gz package should also be download
\end{sphinxadmonition}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 0.0.2}}%
\begin{footnote}[10]\sphinxAtStartFootnote
\sphinxnolinkurl{https://codeload.github.com/yambo-code/yambo-libraries/tar.gz/0.0.2}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
Unpack and move the files to yambo code

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf yambo\PYGZhy{}libraries\PYGZhy{}0.0.2.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
    mv yambo\PYGZhy{}libraries\PYGZhy{}0.0.2/* yambo\PYGZhy{}5.0.2/lib/yambo
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/yambo_5.0.2:compile}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Before compile the yambo, one should compile the {\hyperref[\detokenize{compile/hdf5_1.12.0::doc}]{\sphinxcrossref{\DUrole{doc}{hdf5\_1.12.0}}}} code

\end{itemize}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}ifort\PYGZdq{}} \PYG{n+nv}{MPIFC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiifort\PYGZdq{}} \PYG{n+nv}{F77}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}ifort\PYGZdq{}} \PYG{n+nv}{MPIF77}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiifort\PYGZdq{}} \PYG{n+nv}{CC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}icc\PYGZdq{}} \PYG{n+nv}{MPICC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiicc\PYGZdq{}} \PYG{n+nv}{CPP}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}gcc \PYGZhy{}E \PYGZhy{}P\PYGZdq{}} \PYG{n+nv}{FPP}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}gfortran \PYGZhy{}E \PYGZhy{}P \PYGZhy{}cpp\PYGZdq{}}   \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}open\PYGZhy{}mp \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}dp \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}blas\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}lapack\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}fft\PYGZhy{}includedir\PYG{o}{=}/opt/intel/compilers\PYGZus{}and\PYGZus{}libraries\PYGZus{}2020.4.304/linux/mkl/include/fftw \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}fft\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}blacs\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}scalapack\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libs\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib/libhdf5.a \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}path\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5 \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libdir\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}includedir\PYG{o}{=}\PYGZhy{}I/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/include \PYG{l+s+se}{\PYGZbs{}}
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make core
\end{sphinxVerbatim}


\section{BerkeleyGW}
\label{\detokenize{compile:berkeleygw}}
\sphinxAtStartPar
Compile BerkeleyGW\sphinxhyphen{}3.0.1 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/BerkeleyGW_3.0.1:download-and-install}}\label{\detokenize{compile/BerkeleyGW_3.0.1::doc}}

\subsubsection{Download}
\label{\detokenize{compile/BerkeleyGW_3.0.1:download}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 3.0.1}}%
\begin{footnote}[11]\sphinxAtStartFootnote
\sphinxnolinkurl{https://berkeley.box.com/s/1dgnhiemo47lhxczrn6si71bwxoxor8}
%
\end{footnote} of BerkeleyGW.

\end{itemize}


\subsubsection{Compile}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Before compile BerkeleyGW package, one should compile hdf5\sphinxhyphen{}1.12.0 code Download \sphinxcode{\sphinxupquote{version 1.12.0}}%
\begin{footnote}[12]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.hdfgroup.org/package/hdf5-1-12-0-tar-gz/?wpdmdl=14582\&refresh=618bc42bc76531636549675}
%
\end{footnote} of HDF5.

\end{itemize}


\paragraph{2.1 Compile HDF5}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile-hdf5}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CXX}\PYG{o}{=}mpiicpc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}fortran \PYGZhy{}\PYGZhy{}enable\PYGZhy{}parallel \PYGZhy{}\PYGZhy{}enable\PYGZhy{}shared \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/your\PYGZus{}path
make

make install
\end{sphinxVerbatim}


\paragraph{2.2 Compile BerkeleyGW}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile-berkeleygw}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Create arch.mk file, one can modifiy the ./config/frontera.tacc.utexas.edu\_impi.mk file as follows.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} arch.mk for BerkeleyGW codes}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} suitable for Frontera at TACC, Cascade Lake (CLX) architecture}
\PYG{c+c1}{\PYGZsh{} Uses intel compilers + impi}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} BERKELEYGW DOES NOT WORK WITH INTEL/18 DUE TO A COMPILER BUG!}
\PYG{c+c1}{\PYGZsh{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} You\PYGZsq{}ll need to run:}
\PYG{c+c1}{\PYGZsh{} module load arpack impi intel/19.0.5 phdf5}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Use \PYGZsq{}make \PYGZhy{}j 8\PYGZsq{} for parallel build on Frontera}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Zhenglu Li}
\PYG{c+c1}{\PYGZsh{} July 2020, Berkeley}

\PYG{n+nv}{COMPFLAG}  \PYG{o}{=} \PYGZhy{}DINTEL
\PYG{n+nv}{PARAFLAG}  \PYG{o}{=} \PYGZhy{}DMPI \PYGZhy{}DOMP
\PYG{n+nv}{MATHFLAG}  \PYG{o}{=} \PYGZhy{}DUSESCALAPACK \PYGZhy{}DUNPACKED \PYGZhy{}DUSEFFTW3 \PYGZhy{}DHDF5
\PYG{c+c1}{\PYGZsh{} Only uncomment DEBUGFLAG if you need to develop/debug BerkeleyGW.}
\PYG{c+c1}{\PYGZsh{} The output will be much more verbose, and the code will slow down by \PYGZti{}20\PYGZpc{}.}
\PYG{c+c1}{\PYGZsh{}DEBUGFLAG = \PYGZhy{}DDEBUG}

\PYG{n+nv}{FCPP}    \PYG{o}{=} cpp \PYGZhy{}C \PYGZhy{}nostdinc
\PYG{n+nv}{F90free} \PYG{o}{=} mpiifort \PYGZhy{}free \PYGZhy{}qopenmp \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo
\PYG{n+nv}{LINK}    \PYG{o}{=} mpiifort \PYGZhy{}qopenmp \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo
\PYG{c+c1}{\PYGZsh{} We need the \PYGZhy{}fp\PYGZhy{}model procise to pass the testsuite.}
\PYG{n+nv}{FOPTS}   \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}fp\PYGZhy{}model \PYG{n+nb}{source}
\PYG{n+nv}{FNOOPTS} \PYG{o}{=} \PYGZhy{}O2 \PYGZhy{}fp\PYGZhy{}model \PYG{n+nb}{source} \PYGZhy{}no\PYGZhy{}ip
\PYG{c+c1}{\PYGZsh{}FOPTS   = \PYGZhy{}g \PYGZhy{}O0 \PYGZhy{}check all \PYGZhy{}Warn all \PYGZhy{}traceback}
\PYG{c+c1}{\PYGZsh{}FNOOPTS = \PYGZdl{}(FOPTS)}
\PYG{n+nv}{MOD\PYGZus{}OPT} \PYG{o}{=} \PYGZhy{}module
\PYG{n+nv}{INCFLAG} \PYG{o}{=} \PYGZhy{}I

\PYG{n+nv}{C\PYGZus{}PARAFLAG} \PYG{o}{=} \PYGZhy{}DPARA \PYGZhy{}DMPICH\PYGZus{}IGNORE\PYGZus{}CXX\PYGZus{}SEEK
\PYG{n+nv}{CC\PYGZus{}COMP} \PYG{o}{=} mpiicpc
\PYG{n+nv}{C\PYGZus{}COMP}  \PYG{o}{=} mpiicc
\PYG{n+nv}{C\PYGZus{}LINK}  \PYG{o}{=} mpiicpc
\PYG{n+nv}{C\PYGZus{}OPTS}  \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo \PYGZhy{}qopenmp
\PYG{n+nv}{C\PYGZus{}DEBUGFLAG} \PYG{o}{=}

\PYG{n+nv}{REMOVE}  \PYG{o}{=} /bin/rm \PYGZhy{}f

\PYG{c+c1}{\PYGZsh{} Math Libraries}
\PYG{c+c1}{\PYGZsh{}}
\PYG{n+nv}{MKLPATH}      \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLROOT\PYG{k}{)}/lib/intel64

\PYG{n+nv}{FFTWLIB}      \PYG{o}{=}      \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}start\PYGZhy{}group \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}thread.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}core.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}end\PYGZhy{}group \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{n+nv}{FFTWINCLUDE}  \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLROOT\PYG{k}{)}/include/fftw


\PYG{n+nv}{LAPACKLIB}    \PYG{o}{=} \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}start\PYGZhy{}group \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}thread.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}core.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}end\PYGZhy{}group \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{n+nv}{SCALAPACKLIB} \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}scalapack\PYGZus{}lp64.a

\PYG{n+nv}{HDF5PATH}     \PYG{o}{=}  /opt/software/BerkeleyGW\PYGZhy{}3.0.1/hdf5/lib
\PYG{n+nv}{HDF5LIB}      \PYG{o}{=}      \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5hl\PYGZus{}fortran.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5\PYGZus{}hl.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5\PYGZus{}fortran.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}lz
\PYG{n+nv}{HDF5INCLUDE}  \PYG{o}{=} \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/../include

\PYG{n+nv}{TESTSCRIPT} \PYG{o}{=}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Compile

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYGZhy{}j N all\PYGZhy{}flavors \PYG{o}{(}N is the number of cores\PYG{o}{)}
\end{sphinxVerbatim}


\chapter{Tutorials}
\label{\detokenize{tutorial:tutorials}}\label{\detokenize{tutorial::doc}}

\section{VASP}
\label{\detokenize{tutorial:vasp}}

\subsection{前言}
\label{\detokenize{tutorials/vasp/mobility:id1}}\label{\detokenize{tutorials/vasp/mobility::doc}}
\sphinxAtStartPar
载流子迁移率通常指半导体内部电子和空穴整体的运动快慢情况，是衡量半导体器件性能的重要物理量。2004年，石墨烯的成功剥离引起了研究人员对于二维材料性质探索的浓厚兴趣。石墨烯、黑磷等二维材料展现出的高载流子迁移率是其中的一个重要研究课题，科研人员在理论计算方面已经做了大量的工作。由于电子在运动过程中不仅受到外电场力的作用，还会不断的与晶格、杂质、缺陷等发生无规则的碰撞，大大增加了理论计算的难度。

\sphinxAtStartPar
目前计算载流子迁移率比较常用的理论是形变势理论和玻尔兹曼输运理论，前者没有考虑电子和声子（晶格振动）以及电子与电子之间的相互作用等因素，计算结果存在一定的误差，但笔者的计算结果与实验值在数量级上是吻合的；玻尔兹曼输运理论的一种计算考虑了电子\sphinxhyphen{}声子的相互作用，基于第一性原理计算和最大局域化wannier函数插值方法，借助于 \sphinxhref{http://www.quantum-espresso.org/}{Quantum\sphinxhyphen{}ESPRESSO}%
\begin{footnote}[13]\sphinxAtStartFootnote
\sphinxnolinkurl{http://www.quantum-espresso.org/}
%
\end{footnote} 和 \sphinxhref{https://epw-code.org/}{EPW}%
\begin{footnote}[14]\sphinxAtStartFootnote
\sphinxnolinkurl{https://epw-code.org/}
%
\end{footnote} 软件可以完成载流子迁移率计算。缺点是计算量太大，一般的课题组很难承受起高昂的计算费用，另外EPW软件对于二维材料的计算存在部分问题，在其官方论坛也有讨论，计算过程在后续文章中会提到。

\sphinxAtStartPar
本文以形变势理论方法为基础，详细介绍了二维InSe的电子和空穴的有效质量与载流子迁移率的计算方法。


\subsection{理论基础}
\label{\detokenize{tutorials/vasp/mobility:id2}}
\sphinxAtStartPar
基于 \sphinxhref{https://doi.org/10.1103/PhysRev.80.72}{Bardeen and Shockley}%
\begin{footnote}[15]\sphinxAtStartFootnote
\sphinxnolinkurl{https://doi.org/10.1103/PhysRev.80.72}
%
\end{footnote} 提出的形变势理论，二维材料载流子迁移率可以根据下式计算：
\begin{equation*}
\begin{split}\mu_{\rm 2D} = \frac{e\hbar^3C_{2D}}{k_BTm^{\ast}m_dE_1^2}\end{split}
\end{equation*}
\sphinxAtStartPar
其中， \(m^{\ast}\) 是传输方向上的有效质量， \(T\) 是温度， \(k_B\) 是玻尔兹曼常数 \(E_1\) 表示沿着传输方向上位于价带顶（VBM）的空穴或聚于导带底（CBM）的电子的形变势常数，由公式 \(E_1 = {\Delta}E/({\Delta}l/l_o)\) 确定， \({\Delta}E\) 为在压缩或拉伸应变下CBM或VBM 的能量变化， \(l_0\) 是传输方向上的晶格常数， \({\Delta}l\) 是 \(l_0\) 的变形量。 \(m_d\) 是载流子的平均有效质量，由公式 \(m_d = \sqrt{m_x^{\ast}m_y^{\ast}}\) 定义。 \(C_{2D}\) 是均匀变形晶体的弹性模量，对于2D材料，弹性模量可以通过公式 \(C_{2D}=2[{\partial}^2E/{\partial}({\Delta}l/l_0)^2]/S_0\) 来计算，其中 \(E\) 是总能量， \(S_0\) 是优化后的面积。

\sphinxAtStartPar
下面对公式中的单位（量纲）做一个简单换算，具体如下：

\begin{DUlineblock}{0em}
\item[] \(m_d = \sqrt{m_x^{\ast}m_y^{\ast}}\) (Kg)
\item[] \(E_1 = {\Delta}E/({\Delta}l/l_o)\) (J) 在VASP中 \({\Delta}E\) 的单位是eV，1 eV = 1.6 \(\times\) 10 \(^{-19}\) J
\item[] \(C_{2D} = 2[{\partial}^2E/{\partial}({\Delta}l/l_0)^2]/S_0\) (J/m \(^2\) ) 其中 \(E\) 是总能（eV）， \(S_0\) 表示面积（ \(Å^2\) ）
\item[] \(e\) : \(1.6 \times 10^{-19}\) C
\item[] \(h\) : \(6.626 \times 10^{-34}\) \(J \cdot s\)
\item[] \(k_B\) : \(1.38 \times 10^{-23}\) J/K
\item[] \(m^{\ast}\) : Kg
\end{DUlineblock}

\sphinxAtStartPar
换算过程：
\begin{equation*}
\begin{split}C \cdot J^3 \cdot s^3 \cdot \frac{J}{m^2} = \frac{C \cdot J \cdot s^3}{m^2 \cdot Kg^2}
= \frac{C \cdot J}{\frac{m^2 \cdot Kg^2}{s^3} \cdot \frac{s}{s} \cdot \frac{m^2}{m^2}}
= \frac{C \cdot J}{\frac{s}{m^2} \frac{m^4 \cdot Kg^2}{s^4}}
= \frac{m^2}{s} \cdot \frac{C}{J} = m^2 \cdot s^{-1} \cdot V^{-1}\end{split}
\end{equation*}\begin{equation*}
\begin{split}= 10^4 \times cm^2 \cdot s^{-1} \cdot V^{-1}\end{split}
\end{equation*}
\sphinxAtStartPar
其中： \(1 V = 1 J/C\) ， \(1 J = 1Kg \cdot m^2 / s^2\)


\subsection{计算与数据处理工具}
\label{\detokenize{tutorials/vasp/mobility:id3}}
\begin{DUlineblock}{0em}
\item[] VASP.5.4.4软件 (可以手动控制优化晶格方向)
\item[] OriginLab软件
\item[] Excel
\item[] Materials Studio软件
\item[] 正格矢到倒格矢转化脚本，来源于 \sphinxhref{http://muchong.com/bbs/viewthread.php?tid=7149817\&fpage=1}{小木虫}%
\begin{footnote}[16]\sphinxAtStartFootnote
\sphinxnolinkurl{http://muchong.com/bbs/viewthread.php?tid=7149817\&fpage=1}
%
\end{footnote}
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}! /usr/bin/python}
\PYG{c+c1}{\PYGZsh{} This program reads in base vectors from a given file, calculates reciprocal vectors}
\PYG{c+c1}{\PYGZsh{} then writes to outfile in different units}
\PYG{c+c1}{\PYGZsh{} LinuxUsage: crecip.py infile outfile}
\PYG{c+c1}{\PYGZsh{} Note:  the infile must be in the form below:}
\PYG{c+c1}{\PYGZsh{}   inunit  ang/bohr}
\PYG{c+c1}{\PYGZsh{}   \PYGZus{}begin\PYGZus{}vectors}
\PYG{c+c1}{\PYGZsh{}     46.300000000   0.000000000   0.000000000}
\PYG{c+c1}{\PYGZsh{}      0.000000000  40.500000000   0.000000000}
\PYG{c+c1}{\PYGZsh{}      0.000000000   0.000000000  10.000000000}
\PYG{c+c1}{\PYGZsh{}   \PYGZus{}end\PYGZus{}vectors}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Note: LATTICE VECTORS ARE SPECIFIED IN ROWS !}
\PYG{k}{def} \PYG{n+nf}{GetInUnit}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{inunit} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{k}{for} \PYG{n}{line} \PYG{o+ow}{in} \PYG{n}{incontent}\PYG{p}{:}
        \PYG{k}{if} \PYG{n}{line}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{inunit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{:}
            \PYG{n}{inunit} \PYG{o}{=} \PYG{n}{line}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
            \PYG{k}{break}
    \PYG{k}{return} \PYG{n}{inunit}
\PYG{k}{def} \PYG{n+nf}{GetVectors}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{indstart} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{n}{indend} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{k}{for} \PYG{n}{s} \PYG{o+ow}{in} \PYG{n}{incontent}\PYG{p}{:}
        \PYG{k}{if} \PYG{n}{s}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}begin\PYGZus{}vectors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{!=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{:}
            \PYG{n}{indstart} \PYG{o}{=} \PYG{n}{incontent}\PYG{o}{.}\PYG{n}{index}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}
        \PYG{k}{else}\PYG{p}{:}
            \PYG{k}{if} \PYG{n}{s}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}end\PYGZus{}vectors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{!=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{:}
                \PYG{n}{indend} \PYG{o}{=} \PYG{n}{incontent}\PYG{o}{.}\PYG{n}{index}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}
    \PYG{n}{result} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(} \PYG{n}{indstart} \PYG{o}{+} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{indend} \PYG{p}{)}\PYG{p}{:}
        \PYG{n}{line} \PYG{o}{=} \PYG{n}{incontent}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{result}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{p}{[} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)} \PYG{p}{]} \PYG{p}{)}
    \PYG{k}{return} \PYG{n}{result}
\PYG{k}{def} \PYG{n+nf}{Ang2Bohr}\PYG{p}{(} \PYG{n}{LattVecAng} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{LattVecBohr} \PYG{o}{=} \PYG{n}{LattVecAng}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{j} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{LattVecBohr}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{n}{LattVecAng}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{*}  \PYG{l+m+mf}{1.8897261246}
    \PYG{k}{return} \PYG{n}{LattVecBohr}
\PYG{k}{def} \PYG{n+nf}{DotProduct}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{,} \PYG{n}{v2} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{dotproduct} \PYG{o}{=} \PYG{l+m+mf}{0.0}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{dotproduct} \PYG{o}{=} \PYG{n}{dotproduct} \PYG{o}{+} \PYG{n}{v1}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}
    \PYG{k}{return} \PYG{n}{dotproduct}
\PYG{k}{def} \PYG{n+nf}{CrossProduct}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{,} \PYG{n}{v2} \PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} v3 = v1 WILL LEAD TO WRONG RESULT}
    \PYG{n}{v3} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{p}{)}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{p}{)}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{p}{)}
    \PYG{k}{return} \PYG{n}{v3}
\PYG{k}{def} \PYG{n+nf}{CalcRecVectors}\PYG{p}{(} \PYG{n}{lattvec} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{pi} \PYG{o}{=} \PYG{l+m+mf}{3.141592653589793}
    \PYG{n}{a1} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
    \PYG{n}{a2} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
    \PYG{n}{a3} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}
    \PYG{n}{b1} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a2}\PYG{p}{,} \PYG{n}{a3} \PYG{p}{)}
    \PYG{n}{b2} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a3}\PYG{p}{,} \PYG{n}{a1} \PYG{p}{)}
    \PYG{n}{b3} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a1}\PYG{p}{,} \PYG{n}{a2} \PYG{p}{)}
    \PYG{n}{volume} \PYG{o}{=} \PYG{n}{DotProduct}\PYG{p}{(} \PYG{n}{a1}\PYG{p}{,} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a2}\PYG{p}{,} \PYG{n}{a3} \PYG{p}{)} \PYG{p}{)}
    \PYG{n}{RecVec} \PYG{o}{=} \PYG{p}{[} \PYG{n}{b1}\PYG{p}{,} \PYG{n}{b2}\PYG{p}{,} \PYG{n}{b3} \PYG{p}{]}
    \PYG{c+c1}{\PYGZsh{} it follows the definition for b\PYGZus{}j: a\PYGZus{}i * b\PYGZus{}j = 2pi * delta(i,j)}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{j} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{RecVec}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{n}{RecVec}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{2} \PYG{o}{*} \PYG{n}{pi} \PYG{o}{/} \PYG{n}{volume}
    \PYG{k}{return} \PYG{n}{RecVec}
\PYG{k}{def} \PYG{n+nf}{main}\PYG{p}{(}\PYG{n}{argv} \PYG{o}{=} \PYG{k+kc}{None}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{argv} \PYG{o}{=} \PYG{n}{sys}\PYG{o}{.}\PYG{n}{argv}
    \PYG{n}{infilename}  \PYG{o}{=} \PYG{n}{argv}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
    \PYG{n}{outfilename} \PYG{o}{=} \PYG{n}{argv}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}
    \PYG{n}{pi} \PYG{o}{=} \PYG{l+m+mf}{3.141592653589793}
    \PYG{n}{bohr2ang} \PYG{o}{=} \PYG{l+m+mf}{0.5291772109253}
    \PYG{n}{ang2bohr} \PYG{o}{=} \PYG{l+m+mf}{1.889726124546}
    \PYG{n}{infile}  \PYG{o}{=} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{infilename}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{incontent} \PYG{o}{=} \PYG{n}{infile}\PYG{o}{.}\PYG{n}{readlines}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{infile}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{inunit} \PYG{o}{=} \PYG{n}{GetInUnit}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}
    \PYG{n}{LattVectors} \PYG{o}{=} \PYG{n}{GetVectors}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} convert units from ang to bohr}
    \PYG{k}{if} \PYG{n}{inunit} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ang}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
        \PYG{n}{LattVectors} \PYG{o}{=} \PYG{n}{Ang2Bohr}\PYG{p}{(} \PYG{n}{LattVectors} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} calculate reciprocal vectors in 1/bohr}
    \PYG{n}{RecVectors} \PYG{o}{=} \PYG{n}{CalcRecVectors}\PYG{p}{(} \PYG{n}{LattVectors} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} open outfile for output}
    \PYG{n}{ofile} \PYG{o}{=} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfilename}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output lattice vectors in bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lattice vectors in bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{LattVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output lattice vectors in ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{bohr2ang}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lattice vectors in ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{LattVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 1/bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 1/bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 1/ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{ang2bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 1/ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 2pi/bohr}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{l+m+mf}{1.0}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{2.0}\PYG{o}{*}\PYG{n}{pi}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 2pi/bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 2pi/ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{ang2bohr}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{2.0}\PYG{o}{*}\PYG{n}{pi}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 2pi/ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} close}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{l+m+mi}{0}
\PYG{k}{if} \PYG{n+nv+vm}{\PYGZus{}\PYGZus{}name\PYGZus{}\PYGZus{}} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}\PYGZus{}main\PYGZus{}\PYGZus{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
   \PYG{k+kn}{import} \PYG{n+nn}{sys}
   \PYG{n}{sys}\PYG{o}{.}\PYG{n}{exit}\PYG{p}{(}\PYG{n}{main}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{二维InSe有效质量计算过程}
\label{\detokenize{tutorials/vasp/mobility:inse}}

\subsubsection{建模}
\label{\detokenize{tutorials/vasp/mobility:id5}}
\sphinxAtStartPar
由于计算过程中需要对二维InSe施加应变，但二维InSe原胞是六角结构，不容易施加应变。但是侯柱峰老师讲了对石墨烯原胞施加应变的方法，笔者认为虽然可行，但过于繁琐，故不采用此法。我们可以利用根号建模的方法讲六角结构InSe原胞变为方形结构的InSe超胞，然后施加应变可大大提高操作效率，但计算量的增加在可接受范围之内。下面给出关键的建模步骤，更多的根号建模部分可参考我的往期博客文章。

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{2D-InSe-mobility}.png}
\end{figure}


\subsubsection{能带计算}
\label{\detokenize{tutorials/vasp/mobility:id6}}

\paragraph{结构优化}
\label{\detokenize{tutorials/vasp/mobility:id7}}
\begin{DUlineblock}{0em}
\item[] INCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{SYSTEM} \PYG{o}{=} InSe
\PYG{n+nv}{ISTART} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{NWRITE} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{PREC}   \PYG{o}{=} Accurate
\PYG{n+nv}{ENCUT}  \PYG{o}{=} \PYG{l+m}{500}
\PYG{n+nv}{GGA}    \PYG{o}{=} PE
\PYG{n+nv}{NSW}    \PYG{o}{=} \PYG{l+m}{200}
\PYG{n+nv}{ISIF}   \PYG{o}{=} \PYG{l+m}{3}
\PYG{n+nv}{ISYM}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{IBRION} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{NELM}   \PYG{o}{=} \PYG{l+m}{80}
\PYG{n+nv}{EDIFF}  \PYG{o}{=} 1E\PYGZhy{}05
\PYG{n+nv}{EDIFFG} \PYG{o}{=} \PYGZhy{}0.01
\PYG{n+nv}{ALGO}   \PYG{o}{=} Normal
\PYG{n+nv}{LDIAG}  \PYG{o}{=} .TRUE.
\PYG{n+nv}{LREAL}  \PYG{o}{=} .FALSE.
\PYG{n+nv}{ISMEAR} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{SIGMA}  \PYG{o}{=} \PYG{l+m}{0}.05
\PYG{n+nv}{ICHARG} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{LWAVE}  \PYG{o}{=}  .FALSE.
\PYG{n+nv}{LCHARG} \PYG{o}{=} .FALSE.
\PYG{n+nv}{NPAR}   \PYG{o}{=} \PYG{l+m}{4}
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] KPOINTS
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Monkhorst Pack
\PYG{l+m}{0}
Gamma
 \PYG{l+m}{11}   \PYG{l+m}{7}   \PYG{l+m}{1}
.0   .0   .0
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POSCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
  Se   In
  \PYG{l+m}{1}.000
       \PYG{l+m}{4}.083622259999999      \PYGZhy{}0.000000000000001       \PYG{l+m}{0}.000000000000000
       \PYG{l+m}{0}.000000000000000       \PYG{l+m}{7}.073041233239241       \PYG{l+m}{0}.000000000000000
       \PYG{l+m}{0}.000000000000000       \PYG{l+m}{0}.000000000000000      \PYG{l+m}{25}.377516849029359
  Se   In
  \PYG{l+m}{4}   \PYG{l+m}{4}
Direct
  \PYG{l+m}{0}.5000005000000000   \PYG{l+m}{0}.1666665000000000   \PYG{l+m}{0}.5271404971815050   !Se
  \PYG{l+m}{0}.0000004999999997   \PYG{l+m}{0}.6666665000000004   \PYG{l+m}{0}.5271404971815050   !Se
  \PYG{l+m}{0}.5000005000000000   \PYG{l+m}{0}.1666665000000000   \PYG{l+m}{0}.3152396685456632   !Se
  \PYG{l+m}{0}.0000004999999997   \PYG{l+m}{0}.6666665000000004   \PYG{l+m}{0}.3152396685456632   !Se
  \PYG{l+m}{0}.4999995000000003   \PYG{l+m}{0}.8333335000000002   \PYG{l+m}{0}.4767849697227853   !In
 \PYGZhy{}0.0000005000000000   \PYG{l+m}{0}.3333335000000000   \PYG{l+m}{0}.4767849697227853   !In
  \PYG{l+m}{0}.4999995000000003   \PYG{l+m}{0}.8333335000000002   \PYG{l+m}{0}.3655951960043828   !In
 \PYGZhy{}0.0000005000000000   \PYG{l+m}{0}.3333335000000000   \PYG{l+m}{0}.3655951960043828   !In
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POTCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cat Se/POTCAR In\PYGZus{}d/POTCAR \PYGZgt{} POTCAR
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] OPTCELL
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{100}
\PYG{l+m}{010}
\PYG{l+m}{000}
\end{sphinxVerbatim}


\paragraph{静态自洽}
\label{\detokenize{tutorials/vasp/mobility:id8}}
\begin{DUlineblock}{0em}
\item[] INCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{SYSTEM} \PYG{o}{=} InSe
\PYG{n+nv}{ISTART} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{NWRITE} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{PREC}   \PYG{o}{=} Accurate
\PYG{n+nv}{ENCUT}  \PYG{o}{=} \PYG{l+m}{500}
\PYG{n+nv}{GGA}    \PYG{o}{=} PE
\PYG{n+nv}{NSW}    \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{ISIF}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{ISYM}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{IBRION} \PYG{o}{=} \PYGZhy{}1
\PYG{n+nv}{NELM}   \PYG{o}{=} \PYG{l+m}{80}
\PYG{n+nv}{EDIFF}  \PYG{o}{=} 1E\PYGZhy{}05
\PYG{n+nv}{EDIFFG} \PYG{o}{=} \PYGZhy{}0.01
\PYG{n+nv}{ALGO}   \PYG{o}{=} Normal
\PYG{n+nv}{LDIAG}  \PYG{o}{=} .TRUE.
\PYG{n+nv}{LREAL}  \PYG{o}{=} .FALSE.
\PYG{n+nv}{ISMEAR} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{SIGMA}  \PYG{o}{=} \PYG{l+m}{0}.05
\PYG{n+nv}{ICHARG} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{NPAR}   \PYG{o}{=} \PYG{l+m}{4}
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] KPOINTS
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Monkhorst Pack
\PYG{l+m}{0}
Gamma
 \PYG{l+m}{21}   \PYG{l+m}{13}   \PYG{l+m}{1}
.0   .0   .0
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POSCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cp CONTCAR scf/POSCAR
\end{sphinxVerbatim}


\paragraph{能带计算}
\label{\detokenize{tutorials/vasp/mobility:id9}}

\section{Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{tutorial:quantum-espresso}}

\section{EPW}
\label{\detokenize{tutorial:epw}}

\section{pymatgen}
\label{\detokenize{tutorial:pymatgen}}

\subsection{Basic Module}
\label{\detokenize{tutorials/pymatgen/basic:basic-module}}\label{\detokenize{tutorials/pymatgen/basic::doc}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Lattice, Structure, Molecule Module

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{core} \PYG{k+kn}{import} \PYG{n}{Lattice}\PYG{p}{,} \PYG{n}{Structure}\PYG{p}{,} \PYG{n}{Molecule}
\PYG{c+c1}{\PYGZsh{} Read a POSCAR and write to a CIF.}
\PYG{n}{structure} \PYG{o}{=} \PYG{n}{Structure}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{POSCAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{structure}\PYG{o}{.}\PYG{n}{to}\PYG{p}{(}\PYG{n}{filename}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CsCl.cif}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Read an xyz file and write to a Gaussian Input file.}
\PYG{n}{methane} \PYG{o}{=} \PYG{n}{Molecule}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{methane.xyz}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{methane}\PYG{o}{.}\PYG{n}{to}\PYG{p}{(}\PYG{n}{filename}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{methane.gjf}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
VASP and cif Module

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{cif} \PYG{k+kn}{import} \PYG{n}{CifParser}
\PYG{c+c1}{\PYGZsh{} read structure from cif file}
\PYG{n}{parser} \PYG{o}{=} \PYG{n}{CifParser}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mycif.cif}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{structure} \PYG{o}{=} \PYG{n}{parser}\PYG{o}{.}\PYG{n}{get\PYGZus{}structures}\PYG{p}{(}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{c+c1}{\PYGZsh{} read POSCAR file and write it to cif structure}
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{vasp} \PYG{k+kn}{import} \PYG{n}{Poscar}
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{cif} \PYG{k+kn}{import} \PYG{n}{CifWriter}
\PYG{n}{p} \PYG{o}{=} \PYG{n}{Poscar}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POSCAR}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{w} \PYG{o}{=} \PYG{n}{CifWriter}\PYG{p}{(}\PYG{n}{p}\PYG{o}{.}\PYG{n}{structure}\PYG{p}{)}
\PYG{n}{w}\PYG{o}{.}\PYG{n}{write\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{mystructure.cif}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Gnuplot}
\label{\detokenize{tutorial:gnuplot}}

\subsection{希腊字母表}
\label{\detokenize{tutorials/gnuplot/commands:id1}}\label{\detokenize{tutorials/gnuplot/commands::doc}}\begin{itemize}
\item {} 
\sphinxAtStartPar
用法：\{/symbol De\} 结果：Δε

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{希腊字母符号表}\label{\detokenize{tutorials/gnuplot/commands:id2}}
\sphinxaftertopcaption
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
ALPHABET
&\sphinxstyletheadfamily 
\sphinxAtStartPar
SYMBOL
&\sphinxstyletheadfamily 
\sphinxAtStartPar
ALPHABET
&\sphinxstyletheadfamily 
\sphinxAtStartPar
SYMBOL
&\sphinxstyletheadfamily 
\sphinxAtStartPar
alphabet
&\sphinxstyletheadfamily 
\sphinxAtStartPar
symbol
&\sphinxstyletheadfamily 
\sphinxAtStartPar
alphabet
&\sphinxstyletheadfamily 
\sphinxAtStartPar
symbol
\\
\hline
\sphinxAtStartPar
A
&
\sphinxAtStartPar
Alpha
&
\sphinxAtStartPar
N
&
\sphinxAtStartPar
Nu
&
\sphinxAtStartPar
a
&
\sphinxAtStartPar
alpha
&
\sphinxAtStartPar
n
&
\sphinxAtStartPar
nu
\\
\hline
\sphinxAtStartPar
B
&
\sphinxAtStartPar
Beta
&
\sphinxAtStartPar
O
&
\sphinxAtStartPar
Omicron
&
\sphinxAtStartPar
b
&
\sphinxAtStartPar
beta
&
\sphinxAtStartPar
o
&
\sphinxAtStartPar
omicron
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{索引}
\printindex
\end{document}