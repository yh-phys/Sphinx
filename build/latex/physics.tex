%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,12pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}
%% turn off hyperref patch of \index as sphinx.xdy xindy module takes care of
%% suitable \hyperpage mark-up, working around hyperref-xindy incompatibility
\PassOptionsToPackage{hyperindex=false}{hyperref}
%% memoir class requires extra handling
\makeatletter\@ifclassloaded{memoir}
{\ifdefined\memhyperindexfalse\memhyperindexfalse\fi}{}\makeatother

\PassOptionsToPackage{warn}{textcomp}

\catcode`^^^^00a0\active\protected\def^^^^00a0{\leavevmode\nobreak\ }
\usepackage{cmap}
\usepackage{xeCJK}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\setmainfont{FreeSerif}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Italic,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldItalic
]
\setsansfont{FreeSans}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]
\setmonofont{FreeMono}[
  Extension      = .otf,
  UprightFont    = *,
  ItalicFont     = *Oblique,
  BoldFont       = *Bold,
  BoldItalicFont = *BoldOblique,
]



\usepackage[Sonny]{fncychap}
\ChNameVar{\Large\normalfont\sffamily}
\ChTitleVar{\Large\normalfont\sffamily}
\usepackage{sphinx}

\fvset{fontsize=\small,formatcom=\xeCJKVerbAddon}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Contents}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}


\usepackage{xeCJK}
\usepackage{indentfirst}
\usepackage{times}
\setCJKmainfont[BoldFont=STZhongsong, ItalicFont=STKaiti]{STSong}
\setCJKsansfont[BoldFont=SimHei]{STXihei}
\setCJKmonofont{STFangsong}
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt
\parindent 2em
\definecolor{VerbatimColor}{rgb}{0.95,0.95,0.95}
\setcounter{tocdepth}{3}
\renewcommand\familydefault{\ttdefault}
\renewcommand\CJKfamilydefault{\CJKrmdefault}


\title{Physics}
\date{2021 年 11 月 27 日}
\release{1.00}
\author{Yong He}
\newcommand{\sphinxlogo}{\sphinxincludegraphics{logo.png}\par}
\renewcommand{\releasename}{发布}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\chapter{Overview}
\label{\detokenize{welcome:overview}}\label{\detokenize{welcome::doc}}
\sphinxAtStartPar
This Blog aims at providing some useful installation tips and first\sphinxhyphen{}principles calculations details.

\begin{DUlineblock}{0em}
\item[] About Me
\item[] Yong He (贺勇)
\item[] Ph. D Student.
\item[] Department of Physics, Peking University
\item[] Beijing 100871, China.
\item[] E\sphinxhyphen{}mail：\sphinxhref{mailto:hey@stu.pku.edu.cn}{hey@stu.pku.edu.cn}
\item[] Scholar Page: \sphinxurl{http://scholar.pku.edu.cn/yong\_phys}
\end{DUlineblock}


\chapter{Code list}
\label{\detokenize{code:code-list}}\label{\detokenize{code::doc}}
\sphinxAtStartPar
总结了常见的计算和数据处理软件，以备用时方便查找


\section{pydefect}
\label{\detokenize{code:pydefect}}

\subsection{pydefect程序: 非金属体系点缺陷计算}
\label{\detokenize{code/pydefect:pydefect}}\label{\detokenize{code/pydefect::doc}}
\sphinxAtStartPar
\sphinxstylestrong{介绍}

\sphinxAtStartPar
半导体材料中的缺陷(点缺陷、线缺陷、面缺陷等)对于器件性能具有重要影响，如何构建这些缺陷模型，并且计算这些缺陷(缺陷形成能等)，以及衡量缺陷对性能的影响至关重要。尤其是对于带电缺陷的处理较为复杂，涉及各种经验修正等等，如果没有合适的脚本借助工作量较大。 \sphinxstylestrong{pPydefect} 是一个开源dePython库，用于基于VASP第一性原理计算的 \sphinxstylestrong{非金属固体中的点缺陷处理} 。开发者是东京工业大学的 \sphinxstylestrong{Yu Kumagai教授} 课题组。该程序主要的逻辑框架如下所示：

\noindent\sphinxincludegraphics[width=500\sphinxpxdimen]{{20210202001}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
思维框架图:

\end{itemize}

\noindent\sphinxincludegraphics[width=500\sphinxpxdimen]{{20210202001}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pydefect下载链接：\sphinxcode{\sphinxupquote{Github}}%
\begin{footnote}[1]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/kumagai-group/pydefect}
%
\end{footnote}

\end{itemize}

\begin{sphinxadmonition}{attention}{注意:}
\sphinxAtStartPar
Pydefect现在仅支持维也纳ab\sphinxhyphen{}initio模拟程序包(VASP)，因此我们假设其输入和输出文件名(例如POSCAR，POTCAR，OUTCAR)以及VASP中使用的计算技术(例如周期性边界条件)

\sphinxAtStartPar
遵循vasp约定，在pydefect中使用的单位是能量的eV和长度的埃

\sphinxAtStartPar
仅假定非磁性主体材料
\end{sphinxadmonition}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pydefect官方文档：\sphinxhref{https://kumagai-group.github.io/pydefect/}{Document}%
\begin{footnote}[2]\sphinxAtStartFootnote
\sphinxnolinkurl{https://kumagai-group.github.io/pydefect/}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
官方文档截图

\end{itemize}

\noindent\sphinxincludegraphics{{20210202002}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
实际例子：

\end{itemize}

\noindent\sphinxincludegraphics[width=300\sphinxpxdimen]{{20210202003}.png}

\noindent\sphinxincludegraphics[width=300\sphinxpxdimen]{{20210202004}.png}


\section{Nonrad}
\label{\detokenize{code:nonrad}}

\subsection{Nonrad程序: 计算载流子非辐射捕获系数}
\label{\detokenize{code/Nonrad:nonrad}}\label{\detokenize{code/Nonrad::doc}}
\sphinxAtStartPar
\sphinxstylestrong{介绍}

\sphinxAtStartPar
半导体晶体中的 \sphinxstylestrong{点缺陷} 为 \sphinxstylestrong{载流子非辐射复合} 提供了一种手段，这种复合过程会影响器件的性能。Alkauskas等人在2014年首先提出了基于量子力学方法来评估捕获过程{[}Phys. Rev. B 90, 075202 (2014){]}，详细来说他们提出了一种评估投影缀加平面波中电子与声子耦合的方法。最近加州大学圣塔芭芭拉分校 \sphinxstylestrong{Chris G. Van de Walle教授} 课题组在Alkauskas等人的基础上开发了 \sphinxstylestrong{Nonrad程序} 用于评估载流子非辐射捕获系数。他们还表明，用高斯替换Dirac德尔塔函数的通用过程会在所得的捕获率中引入误差，并实现一种替代方案来适当考虑振动展宽。最后，他们通过与直接数值评估进行比较来评估对Sommerfeld参数使用解析近似的准确性。
\begin{itemize}
\item {} 
\sphinxAtStartPar
Nonrad下载链接和官方文档：

\end{itemize}

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Github}}%
\begin{footnote}[3]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/mturiansky/nonrad}
%
\end{footnote}

\sphinxAtStartPar
\sphinxhref{https://nonrad.readthedocs.io/en/latest/}{Document}%
\begin{footnote}[4]\sphinxAtStartFootnote
\sphinxnolinkurl{https://nonrad.readthedocs.io/en/latest/}
%
\end{footnote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Nonrad安装方法：

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip install nonrad
\end{sphinxVerbatim}

\sphinxAtStartPar
如果科研中使用了Nonrad，请帮忙引用下面的文献: \sphinxhref{https://arxiv.org/pdf/2011.07433.pdf}{Ref}%
\begin{footnote}[5]\sphinxAtStartFootnote
\sphinxnolinkurl{https://arxiv.org/pdf/2011.07433.pdf}
%
\end{footnote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
文献截图

\end{itemize}

\noindent\sphinxincludegraphics{{20210202005}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
实际例子

\end{itemize}

\noindent\sphinxincludegraphics{{20210202006}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
实际结果

\end{itemize}

\noindent\sphinxincludegraphics{{20210202007}.png}


\section{PyXtal}
\label{\detokenize{code:pyxtal}}

\subsection{PyXtal程序: 晶体结构生成和对称性分析}
\label{\detokenize{code/PyXtal:pyxtal}}\label{\detokenize{code/PyXtal::doc}}
\sphinxAtStartPar
\sphinxstylestrong{介绍}

\sphinxAtStartPar
内华达大学物理与天文学系的助理教授 \sphinxstylestrong{ZHu Qiang} \sphinxhref{https://qzhu2017.github.io}{课题组}%
\begin{footnote}[6]\sphinxAtStartFootnote
\sphinxnolinkurl{https://qzhu2017.github.io}
%
\end{footnote} 开发了 \sphinxstylestrong{PyXtal},这是一个基于Python编程语言的新软件包，用于为原子和分子系统生成具有特定对称性和化学成分的结构。该软件为各种体系提供支持，只需输入化学成分和对称基团信息，PyXtal便可以通过逐步合并方案自动找到Wyckoff位置的合适组合。此外，当给出分子几何结构时，PyXtal可以生成具有不同维度的有机晶体，且分子占据了一般和特殊的Wyckoff位置。PyXtal也可以选择接受用户定义的参数(例如，晶胞参数、最小距离和Wyckoff位置)。通常， \sphinxstylestrong{PyXtal具有三个功能}：
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
生成自定义结构

\item {} 
\sphinxAtStartPar
通过对称关系来调制结构

\item {} 
\sphinxAtStartPar
连接需要生成随机对称结构的现有结构预测代码

\end{enumerate}

\sphinxAtStartPar
此外，我们提供了一些实用程序，可简化结构分析，包括对称性分析、几何优化和粉末X射线衍射(XRD)的模拟。
\begin{itemize}
\item {} 
\sphinxAtStartPar
PyXtal内部原理框架：

\end{itemize}

\noindent\sphinxincludegraphics{{20210204001}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
PyXtal下载链接：\sphinxcode{\sphinxupquote{Github}}%
\begin{footnote}[7]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/qzhu2017/PyXtal}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
PyXtal主页

\end{itemize}

\noindent\sphinxincludegraphics{{20210204002}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
PyXtal官方文档: \sphinxhref{https://pyxtal.readthedocs.io/en/latest/}{Document}%
\begin{footnote}[8]\sphinxAtStartFootnote
\sphinxnolinkurl{https://pyxtal.readthedocs.io/en/latest/}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
官方文档

\end{itemize}

\noindent\sphinxincludegraphics{{20210204003}.png}
\begin{itemize}
\item {} 
\sphinxAtStartPar
参考文献

\end{itemize}

\noindent\sphinxincludegraphics{{20210204004}.png}


\section{Irvsp}
\label{\detokenize{code:irvsp}}

\subsection{Irvsp程序：计算VASP中电子态的不可约表示}
\label{\detokenize{code/Irvsp:irvsp-vasp}}\label{\detokenize{code/Irvsp::doc}}
\sphinxAtStartPar
\sphinxstylestrong{介绍}

\sphinxAtStartPar
最近 \sphinxstylestrong{中国科学院物理研究所} 北京凝聚态物理国家重点实验室的 \sphinxstylestrong{Wang Zhijun教授课题组} 开发了一个开放源代码的程序 \sphinxstylestrong{irvsp} 。 \sphinxstylestrong{它通过与VASP的接口为所有230个空间群计算电子状态的不可约表示} 。该代码由VASP软件包生成的基于平面波的波函数(例如WAVECAR)和空间群算子(列在OUTCAR中)提供。该程序计算矩阵表示的迹线，并确定三维布里渊区中所有能带和所有k点的对应不可约表示。 \sphinxstylestrong{它还适用于自旋轨道耦合(SOC)} ，即用于双群。建立拓扑量子化学理论后，分析能带，能带的连接性和能带拓扑结构特别有用。因此， \sphinxstylestrong{开发了相关的库irrep\_bcs.a，可以很容易地通过其它的ab\sphinxhyphen{}initio软件包链接到该库} 。另外，该程序已扩展到正交紧束缚(TB)哈密顿量，例如电子或声子TB哈密顿量。
\begin{itemize}
\item {} 
\sphinxAtStartPar
irvsp下载链接：\sphinxcode{\sphinxupquote{Github}}%
\begin{footnote}[9]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/zjwang11/irvsp}
%
\end{footnote}

\end{itemize}


\section{phonopy}
\label{\detokenize{code:phonopy}}

\subsection{Phonopy: 声子性质处理软件}
\label{\detokenize{code/phonopy:phonopy}}\label{\detokenize{code/phonopy::doc}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxhref{https://phonopy.github.io/phonopy/}{phonopy}%
\begin{footnote}[10]\sphinxAtStartFootnote
\sphinxnolinkurl{https://phonopy.github.io/phonopy/}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
\sphinxhref{https://phonopy.github.io/phono3py/}{phono3py}%
\begin{footnote}[11]\sphinxAtStartFootnote
\sphinxnolinkurl{https://phonopy.github.io/phono3py/}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
声子振动模式可视化 \sphinxhref{http://henriquemiranda.github.io/phononwebsite/index.html}{Phonon website}%
\begin{footnote}[12]\sphinxAtStartFootnote
\sphinxnolinkurl{http://henriquemiranda.github.io/phononwebsite/index.html}
%
\end{footnote}

\end{itemize}


\chapter{Installation}
\label{\detokenize{compile:installation}}\label{\detokenize{compile::doc}}

\section{libbeef}
\label{\detokenize{compile:libbeef}}
\sphinxAtStartPar
Compile libbeef using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/libbeef:download-and-install}}\label{\detokenize{compile/libbeef::doc}}

\subsubsection{Download}
\label{\detokenize{compile/libbeef:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version master}}%
\begin{footnote}[13]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/vossjo/libbeef}
%
\end{footnote} of libbeef.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone https://github.com/vossjo/libbeef.git
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/libbeef:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{CC}\PYG{o}{=}icc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/libbeef/build
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure libbeef

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test libbeef

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make install
\end{sphinxVerbatim}


\section{libxc}
\label{\detokenize{compile:libxc}}
\sphinxAtStartPar
Compile libxc\sphinxhyphen{}4.3.4 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/libxc_4.3.4:download-and-install}}\label{\detokenize{compile/libxc_4.3.4::doc}}

\subsubsection{Download}
\label{\detokenize{compile/libxc_4.3.4:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 4.3.4}}%
\begin{footnote}[14]\sphinxAtStartFootnote
\sphinxnolinkurl{http://www.tddft.org/programs/libxc/down.php?file=4.3.4/libxc-4.3.4.tar.gz}
%
\end{footnote} of libxc.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget http://www.tddft.org/programs/libxc/down.php?file\PYG{o}{=}\PYG{l+m}{4}.3.4/libxc\PYGZhy{}4.3.4.tar.gz
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/libxc_4.3.4:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{AR}\PYG{o}{=}ar \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{FC}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F77}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{F90}\PYG{o}{=}ifort \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{CC}\PYG{o}{=}icc
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure libxc

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test libxc

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make Install
\end{sphinxVerbatim}


\section{hdf5}
\label{\detokenize{compile:hdf5}}
\sphinxAtStartPar
Compile hdf5\sphinxhyphen{}1.12.0 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/hdf5_1.12.0:download-and-install}}\label{\detokenize{compile/hdf5_1.12.0::doc}}

\subsubsection{Download}
\label{\detokenize{compile/hdf5_1.12.0:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 1.12.0}}%
\begin{footnote}[15]\sphinxAtStartFootnote
\sphinxnolinkurl{https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.12/hdf5-1.12.0/src/hdf5-1.12.0.tar.gz}
%
\end{footnote} of HDF5.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://support.hdfgroup.org/ftp/HDF5/releases/hdf5\PYGZhy{}1.12/hdf5\PYGZhy{}1.12.0/src/hdf5\PYGZhy{}1.12.0.tar.gz
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/hdf5_1.12.0:compile}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file configure.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}

    ./configure \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CXX}\PYG{o}{=}mpiicpc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}fortran \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}parallel \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}shared \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/hdf5\PYGZhy{}1.12.0 \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}with\PYGZhy{}zlib\PYG{o}{=}/opt/software/zlib\PYGZhy{}1.2.11
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure HDF5

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash configure.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile and test HDF5

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYG{o}{\PYGZam{}\PYGZam{}} make check \PYG{o}{\PYGZam{}\PYGZam{}} make Install
\end{sphinxVerbatim}


\section{Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{compile:quantum-espresso}}
\sphinxAtStartPar
Compile Quantum ESPRESSO\sphinxhyphen{}6.7, including EPW and thermo\_pw codes, using Intel Parallel Studio Xe 2020\_update4 with libbeef, libxc\sphinxhyphen{}4.3.4 and HDF5\sphinxhyphen{}1.12.0 packsges


\subsection{Download and Install}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:download-and-install}}\label{\detokenize{compile/Quantum-ESPRESSO_6.7::doc}}

\subsubsection{Download}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 6.7}}%
\begin{footnote}[16]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/QEF/q-e/releases/download/qe-6.7.0/qe-6.7-ReleasePack.tgz}
%
\end{footnote} of Quantum\sphinxhyphen{}ESPRESSO.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://github.com/QEF/q\PYGZhy{}e/releases/download/qe\PYGZhy{}6.7.0/qe\PYGZhy{}6.7\PYGZhy{}ReleasePack.tgz
\end{sphinxVerbatim}

\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
One should also download the thermo\_pw \sphinxcode{\sphinxupquote{version 1.4.1}}%
\begin{footnote}[17]\sphinxAtStartFootnote
\sphinxnolinkurl{http://people.sissa.it/~dalcorso/thermo\_pw/thermo\_pw.1.4.1.tar.gz}
%
\end{footnote} and Wannier90 \sphinxcode{\sphinxupquote{version 3.1.0}}%
\begin{footnote}[18]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/wannier-developers/wannier90/archive/v3.1.0.tar.gz}
%
\end{footnote} codes
\end{sphinxadmonition}


\subsubsection{Compile}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:compile}}
\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
Before compile Quantum\sphinxhyphen{}ESPRESSO package, one should compile the {\hyperref[\detokenize{compile/libbeef::doc}]{\sphinxcrossref{\DUrole{doc}{libbeef}}}}, {\hyperref[\detokenize{compile/libxc_4.3.4::doc}]{\sphinxcrossref{\DUrole{doc}{libxc\_4.3.4}}}} and {\hyperref[\detokenize{compile/hdf5_1.12.0::doc}]{\sphinxcrossref{\DUrole{doc}{hdf5\_1.12.0}}}}
\end{sphinxadmonition}


\paragraph{preparation}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:preparation}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Unpack qe\sphinxhyphen{}6.7\sphinxhyphen{}ReleasePack

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf qe\PYGZhy{}6.7\PYGZhy{}ReleasePack.tgz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} qe\PYGZhy{}6.7/test\PYGZhy{}suite
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Edit the check\_pseudo.sh file as follows

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Copyright (C) 2001\PYGZhy{}2016 Quantum ESPRESSO group}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} This program is free software; you can redistribute it and/or}
\PYG{c+c1}{\PYGZsh{} modify it under the terms of the GNU General Public License}
\PYG{c+c1}{\PYGZsh{} as published by the Free Software Foundation; either version 2}
\PYG{c+c1}{\PYGZsh{} of the License. See the file \PYGZsq{}License\PYGZsq{} in the root directory}
\PYG{c+c1}{\PYGZsh{} of the present distribution.}

\PYG{k}{if} \PYG{n+nb}{test} \PYG{l+s+s2}{\PYGZdq{}`which curl`\PYGZdq{}} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}} \PYG{p}{;} \PYG{k}{then}
   \PYG{k}{if} \PYG{n+nb}{test} \PYG{l+s+s2}{\PYGZdq{}`which wget`\PYGZdq{}} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}} \PYG{p}{;} \PYG{k}{then}
      \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}\PYGZsh{}\PYGZsh{}\PYGZsh{} wget or curl not found: will not be able to download missing PP \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZdq{}}
   \PYG{k}{else}
      \PYG{n+nv}{DOWNLOADER}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}wget \PYGZhy{}O\PYGZdq{}}
      \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}wget found\PYGZdq{}}
   \PYG{k}{fi}
\PYG{k}{else}
   \PYG{n+nv}{DOWNLOADER}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}curl \PYGZhy{}o\PYGZdq{}}
   \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}curl found\PYGZdq{}}
\PYG{k}{fi}

\PYG{n+nv}{inputs}\PYG{o}{=}\PYG{l+s+sb}{`}find \PYG{n+nv}{\PYGZdl{}1}* \PYGZhy{}type f \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}*.in\PYGZdq{}} \PYGZhy{}not \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}test.*\PYGZdq{}} \PYGZhy{}not \PYGZhy{}name \PYG{l+s+s2}{\PYGZdq{}benchmark.*\PYGZdq{}}\PYG{l+s+sb}{`}
\PYG{n+nv}{pp\PYGZus{}files}\PYG{o}{=}\PYG{l+s+sb}{`}\PYG{k}{for} x \PYG{k}{in} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{inputs}\PYG{l+s+si}{\PYGZcb{}}\PYG{p}{;} \PYG{k}{do} grep UPF \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{x}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{|} awk \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}print \PYGZdl{}3\PYGZcb{}\PYGZsq{}}\PYG{p}{;} \PYG{k}{done}\PYG{l+s+sb}{`}

\PYG{k}{for} pp\PYGZus{}file \PYG{k}{in} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}files}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{;} \PYG{k}{do}
\PYG{k}{if} ! \PYG{n+nb}{test} \PYGZhy{}f \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{p}{;} \PYG{k}{then}
    \PYG{n+nb}{echo} \PYGZhy{}n \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Downloading }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ to }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ ... }\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{DOWNLOADER}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{ESPRESSO\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{NETWORK\PYGZus{}PSEUDO}\PYG{l+s+si}{\PYGZcb{}}/\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+m}{2}\PYGZgt{} /dev/null
    \PYG{k}{if} \PYG{n+nb}{test} \PYG{n+nv}{\PYGZdl{}?} !\PYG{o}{=} \PYG{l+m}{0} \PYG{p}{;} \PYG{k}{then}
        \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}Download of\PYGZdq{}} \PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}} \PYG{l+s+s2}{\PYGZdq{}FAILED, do it manually \PYGZhy{}\PYGZhy{} Testing aborted!\PYGZdq{}}
        \PYG{n+nb}{exit} \PYGZhy{}1
    \PYG{k}{else}
        \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}done.\PYGZdq{}}
    \PYG{k}{fi}
\PYG{k}{else}
    \PYG{n+nb}{echo} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{No need to download }\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{pp\PYGZus{}file}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{.}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{k}{fi}
\PYG{k}{done}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Download the pseudopotentials

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make pseudo
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Unpack the thermo\_pw and move it into Quantum\sphinxhyphen{}ESPRESSO main direction

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf thermo\PYGZus{}pw.1.4.1.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} mv thermo\PYGZus{}pw qe\PYGZhy{}6.7
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Rename the Wannier90 code and move it into Quantum\sphinxhyphen{}ESPRESSO

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mv wannier90\PYGZhy{}3.1.0.tar.gz v3.1.0 \PYG{o}{\PYGZam{}\PYGZam{}} mv v3.1.0 qe\PYGZhy{}6.7/archive/
\end{sphinxVerbatim}


\paragraph{Compile Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{compile/Quantum-ESPRESSO_6.7:compile-quantum-espresso}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{MPIF90}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{n+nv}{F90}\PYG{o}{=}ifort \PYG{n+nv}{F77}\PYG{o}{=}mpiifort \PYGZhy{}enable\PYGZhy{}parallel \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYGZhy{}prefix\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libxc\PYGZhy{}include\PYG{o}{=}/opt/software/libxc\PYGZhy{}4.3.4/bin/include \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}scalapack\PYG{o}{=}intel \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libs\PYG{o}{=}/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}include\PYG{o}{=}/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/include \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libbeef\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
        \PYGZhy{}\PYGZhy{}with\PYGZhy{}libbeef\PYGZhy{}prefix\PYG{o}{=}/opt/software/libbeef/build/lib
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
Edit the make.inc file

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{43}  \PYG{n+nv}{DFLAGS}         \PYG{o}{=}  \PYGZhy{}D\PYGZus{}\PYGZus{}DFTI \PYGZhy{}D\PYGZus{}\PYGZus{}LIBXC \PYGZhy{}D\PYGZus{}\PYGZus{}MPI \PYGZhy{}D\PYGZus{}\PYGZus{}SCALAPACK \PYGZhy{}D\PYGZus{}\PYGZus{}NOBEEF
\PYG{l+m}{109} \PYG{n+nv}{FFLAGS}         \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}assume byterecl \PYGZhy{}g \PYGZhy{}traceback \PYGZhy{}xhost
\PYG{l+m}{124} \PYG{n+nv}{LD\PYGZus{}LIBS}        \PYG{o}{=} \PYGZhy{}L/opt/software/libxc\PYGZhy{}4.3.4/bin/lib \PYGZhy{}lxcf03 \PYGZhy{}lxc
\PYG{l+m}{131} \PYG{n+nv}{BLAS\PYGZus{}LIBS}      \PYG{o}{=}   \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{137} \PYG{n+nv}{LAPACK\PYGZus{}LIBS}    \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{140} \PYG{n+nv}{SCALAPACK\PYGZus{}LIBS} \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{145} \PYG{n+nv}{FFT\PYGZus{}LIBS}       \PYG{o}{=} \PYGZhy{}L\PYG{l+s+si}{\PYGZdl{}\PYGZob{}}\PYG{n+nv}{MKLROOT}\PYG{l+s+si}{\PYGZcb{}}/lib/intel64 \PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}sequential \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{l+m}{148} \PYG{n+nv}{HDF5\PYGZus{}LIBS} \PYG{o}{=} \PYGZhy{}L/opt/software/hdf5\PYGZhy{}1.12.0\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYGZhy{}lhdf5
\PYG{l+m}{155} \PYG{n+nv}{MPI\PYGZus{}LIBS}       \PYG{o}{=} \PYGZhy{}L/opt/intel/impi/2019.9.304/intel64/lib \PYGZhy{}lmpi
\PYG{l+m}{163} \PYG{n+nv}{BEEF\PYGZus{}LIBS}      \PYG{o}{=} /opt/software/libbeef/build/lib/libbeef.a
\PYG{l+m}{164} \PYG{n+nv}{BEEF\PYGZus{}LIBS\PYGZus{}SWITCH} \PYG{o}{=} internal
\PYG{l+m}{185} \PYG{n+nv}{LIBXC\PYGZus{}LIBS}     \PYG{o}{=} \PYGZhy{}L/opt/software/libxc\PYGZhy{}4.3.4/bin/lib \PYGZhy{}lxcf03 \PYGZhy{}lxc
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
compile Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{pp}\PYG{o}{=}\PYG{l+m}{4}
make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pw \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} ph \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} hp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pwcond \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} neb \PYG{l+s+se}{\PYGZbs{}}
    \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} pp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} cp \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} tddfpt \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} gwl \PYG{l+s+se}{\PYGZbs{}}
    \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} ld1 \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} xspectra \PYG{o}{\PYGZam{}\PYGZam{}} make \PYGZhy{}j \PYG{n+nv}{\PYGZdl{}pp} couple \PYG{o}{\PYGZam{}\PYGZam{}} make epw

\PYG{n+nb}{cd} thermo\PYGZus{}pw \PYG{o}{\PYGZam{}\PYGZam{}} make join\PYGZus{}qe \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} ../ \PYG{o}{\PYGZam{}\PYGZam{}} make thermo\PYGZus{}pw
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
test Quantum\sphinxhyphen{}ESPRESSO

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} test\PYGZhy{}suite \PYG{o}{\PYGZam{}\PYGZam{}} make run\PYGZhy{}tests\PYGZhy{}parallel
\end{sphinxVerbatim}


\section{ABINIT}
\label{\detokenize{compile:abinit}}
\sphinxAtStartPar
Compile abinit\sphinxhyphen{}9.4.2 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/abinit_9.4.2:download-and-install}}\label{\detokenize{compile/abinit_9.4.2::doc}}

\subsubsection{Download}
\label{\detokenize{compile/abinit_9.4.2:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 9.4.2}}%
\begin{footnote}[19]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.abinit.org/sites/default/files/packages/abinit-9.4.2.tar.gz}
%
\end{footnote} of abinit.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://www.abinit.org/sites/default/files/packages/abinit\PYGZhy{}9.4.2.tar.gz
\end{sphinxVerbatim}

\begin{sphinxadmonition}{tip}{小技巧:}
\sphinxAtStartPar
One should also download the recommended ABINIT Fallbacks
\end{sphinxadmonition}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{Fallbacks}}%
\begin{footnote}[20]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.abinit.org/fallbacks}
%
\end{footnote} of abinit\sphinxhyphen{}9.4.2

\end{enumerate}


\subsubsection{Compile}
\label{\detokenize{compile/abinit_9.4.2:compile}}
\sphinxAtStartPar
Before compile abinit package, one should create a installation direction and copy the abinit and wannier90 to this direction. Next, one should build a tarballs by following command.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mkdir \PYGZhy{}p \PYGZti{}/.abinit/tarballs
\end{sphinxVerbatim}

\sphinxAtStartPar
Move the packages of above download (exclude wannier90) to tarballs.


\paragraph{Compile wannier90}
\label{\detokenize{compile/abinit_9.4.2:compile-wannier90}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Unpack and configure wannier90. This can be done by copy/pasting the following lines:

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf wannier90\PYGZhy{}2.0.1.1.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nb}{cd} wannier90\PYGZhy{}2.0.1.1 \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
    \PYG{n+nv}{prefix}\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build/ \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
make \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
make install
\end{sphinxVerbatim}


\paragraph{Compile abinit}
\label{\detokenize{compile/abinit_9.4.2:compile-abinit}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/build \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}io\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}with\PYGZhy{}mpi\PYG{o}{=}/opt/intel/impi/2019.9.304/intel64 \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}inplace\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}openmp\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}bse\PYGZhy{}unpacked\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}gw\PYGZhy{}dpc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}with\PYGZhy{}wannier90\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile fallbacks by following commands

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} fallbacks \PYG{o}{\PYGZam{}\PYGZam{}} bash build\PYGZhy{}abinit\PYGZhy{}fallbacks.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
edit the compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/build \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}io\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}mpi\PYG{o}{=}/opt/intel/impi/2019.9.304/intel64 \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi\PYGZhy{}inplace\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}openmp\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}bse\PYGZhy{}unpacked\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}gw\PYGZhy{}dpc\PYG{o}{=}yes \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}wannier90\PYG{o}{=}/opt/software/wannier90\PYGZhy{}2.0.1.1/build \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}libxc}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/libxc/4.3.4 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}hdf5}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/hdf5/1.10.6 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}netcdf}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/netcdf4/4.6.3 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}netcdf\PYGZus{}fortran}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/netcdf4\PYGZus{}fortran/4.5.2 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}xmlf90}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/xmlf90/1.5.3.1 \PYG{l+s+se}{\PYGZbs{}}
\PYG{n+nv}{with\PYGZus{}libpsml}\PYG{o}{=}/opt/software/abinit\PYGZhy{}9.4.2/fallbacks/install\PYGZus{}fb/intel/19.1/libpsml/1.1.7
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
configure abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{5}
\item {} 
\sphinxAtStartPar
compile abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYGZhy{}j\PYGZlt{}n\PYGZgt{} \PYG{o}{\PYGZam{}\PYGZam{}} make install
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{6}
\item {} 
\sphinxAtStartPar
test abinit

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./runtests.py v1 \PYGZhy{}j4
\end{sphinxVerbatim}

\sphinxAtStartPar
The test results are as follows.

\noindent\sphinxincludegraphics{{abinit_test_v1}.png}


\section{Yambo}
\label{\detokenize{compile:yambo}}
\sphinxAtStartPar
Compile Yambo\sphinxhyphen{}5.0.2 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/yambo_5.0.2:download-and-install}}\label{\detokenize{compile/yambo_5.0.2::doc}}

\subsubsection{Download}
\label{\detokenize{compile/yambo_5.0.2:download}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 5.0.2}}%
\begin{footnote}[21]\sphinxAtStartFootnote
\sphinxnolinkurl{https://github.com/yambo-code/yambo/archive/5.0.2.tar.gz}
%
\end{footnote} of Yambo.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
wget https://github.com/yambo\PYGZhy{}code/yambo/archive/5.0.2.tar.gz
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
One should also download the dependent packages of Yambo by following commands

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf yambo\PYGZhy{}5.0.2.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nb}{cd} yambo\PYGZhy{}5.0.2/lib/archive \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
    make \PYGZhy{}f Makefile.loc
\end{sphinxVerbatim}

\begin{sphinxadmonition}{important}{重要:}
\sphinxAtStartPar
The yambo\sphinxhyphen{}libraries\sphinxhyphen{}0.0.2.tar.gz package should also be download
\end{sphinxadmonition}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 0.0.2}}%
\begin{footnote}[22]\sphinxAtStartFootnote
\sphinxnolinkurl{https://codeload.github.com/yambo-code/yambo-libraries/tar.gz/0.0.2}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
Unpack and move the files to yambo code

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tar zxvf yambo\PYGZhy{}libraries\PYGZhy{}0.0.2.tar.gz \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{l+s+se}{\PYGZbs{}}
    mv yambo\PYGZhy{}libraries\PYGZhy{}0.0.2/* yambo\PYGZhy{}5.0.2/lib/yambo
\end{sphinxVerbatim}


\subsubsection{Compile}
\label{\detokenize{compile/yambo_5.0.2:compile}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Before compile the yambo, one should compile the {\hyperref[\detokenize{compile/hdf5_1.12.0::doc}]{\sphinxcrossref{\DUrole{doc}{hdf5\_1.12.0}}}} code

\end{itemize}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create configure file compile.sh

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{FC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}ifort\PYGZdq{}} \PYG{n+nv}{MPIFC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiifort\PYGZdq{}} \PYG{n+nv}{F77}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}ifort\PYGZdq{}} \PYG{n+nv}{MPIF77}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiifort\PYGZdq{}} \PYG{n+nv}{CC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}icc\PYGZdq{}} \PYG{n+nv}{MPICC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}mpiicc\PYGZdq{}} \PYG{n+nv}{CPP}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}gcc \PYGZhy{}E \PYGZhy{}P\PYGZdq{}} \PYG{n+nv}{FPP}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}gfortran \PYGZhy{}E \PYGZhy{}P \PYGZhy{}cpp\PYGZdq{}}   \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}mpi \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}open\PYGZhy{}mp \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}enable\PYGZhy{}dp \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}blas\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}lapack\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}fft\PYGZhy{}includedir\PYG{o}{=}/opt/intel/compilers\PYGZus{}and\PYGZus{}libraries\PYGZus{}2020.4.304/linux/mkl/include/fftw \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}fft\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}intel\PYGZus{}thread \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}blacs\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}scalapack\PYGZhy{}libs\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}\PYGZhy{}lmkl\PYGZus{}scalapack\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64 \PYGZhy{}lmkl\PYGZus{}core \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libs\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib/libhdf5.a \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}path\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5 \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}libdir\PYG{o}{=}/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/lib \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}with\PYGZhy{}hdf5\PYGZhy{}includedir\PYG{o}{=}\PYGZhy{}I/opt/software/HDF5\PYGZus{}intelmpi/hdf5\PYGZhy{}1.12.0/hdf5/include \PYG{l+s+se}{\PYGZbs{}}
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
configure yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash compile.sh
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
compile yambo

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make core
\end{sphinxVerbatim}


\section{BerkeleyGW}
\label{\detokenize{compile:berkeleygw}}
\sphinxAtStartPar
Compile BerkeleyGW\sphinxhyphen{}3.0.1 using Intel Parallel Studio Xe 2020\_update4


\subsection{Download and Install}
\label{\detokenize{compile/BerkeleyGW_3.0.1:download-and-install}}\label{\detokenize{compile/BerkeleyGW_3.0.1::doc}}

\subsubsection{Download}
\label{\detokenize{compile/BerkeleyGW_3.0.1:download}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Download \sphinxcode{\sphinxupquote{version 3.0.1}}%
\begin{footnote}[23]\sphinxAtStartFootnote
\sphinxnolinkurl{https://berkeley.box.com/s/1dgnhiemo47lhxczrn6si71bwxoxor8}
%
\end{footnote} of BerkeleyGW.

\end{itemize}


\subsubsection{Compile}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Before compile BerkeleyGW package, one should compile hdf5\sphinxhyphen{}1.12.0 code Download \sphinxcode{\sphinxupquote{version 1.12.0}}%
\begin{footnote}[24]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.hdfgroup.org/package/hdf5-1-12-0-tar-gz/?wpdmdl=14582\&refresh=618bc42bc76531636549675}
%
\end{footnote} of HDF5.

\end{itemize}


\paragraph{2.1 Compile HDF5}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile-hdf5}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
./configure \PYG{n+nv}{CC}\PYG{o}{=}mpiicc \PYG{n+nv}{FC}\PYG{o}{=}mpiifort \PYG{n+nv}{CXX}\PYG{o}{=}mpiicpc \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}enable\PYGZhy{}fortran \PYGZhy{}\PYGZhy{}enable\PYGZhy{}parallel \PYGZhy{}\PYGZhy{}enable\PYGZhy{}shared \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}prefix\PYG{o}{=}/your\PYGZus{}path
make

make install
\end{sphinxVerbatim}


\paragraph{2.2 Compile BerkeleyGW}
\label{\detokenize{compile/BerkeleyGW_3.0.1:compile-berkeleygw}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Create arch.mk file, one can modifiy the ./config/frontera.tacc.utexas.edu\_impi.mk file as follows.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} arch.mk for BerkeleyGW codes}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} suitable for Frontera at TACC, Cascade Lake (CLX) architecture}
\PYG{c+c1}{\PYGZsh{} Uses intel compilers + impi}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} BERKELEYGW DOES NOT WORK WITH INTEL/18 DUE TO A COMPILER BUG!}
\PYG{c+c1}{\PYGZsh{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} You\PYGZsq{}ll need to run:}
\PYG{c+c1}{\PYGZsh{} module load arpack impi intel/19.0.5 phdf5}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Use \PYGZsq{}make \PYGZhy{}j 8\PYGZsq{} for parallel build on Frontera}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Zhenglu Li}
\PYG{c+c1}{\PYGZsh{} July 2020, Berkeley}

\PYG{n+nv}{COMPFLAG}  \PYG{o}{=} \PYGZhy{}DINTEL
\PYG{n+nv}{PARAFLAG}  \PYG{o}{=} \PYGZhy{}DMPI \PYGZhy{}DOMP
\PYG{n+nv}{MATHFLAG}  \PYG{o}{=} \PYGZhy{}DUSESCALAPACK \PYGZhy{}DUNPACKED \PYGZhy{}DUSEFFTW3 \PYGZhy{}DHDF5
\PYG{c+c1}{\PYGZsh{} Only uncomment DEBUGFLAG if you need to develop/debug BerkeleyGW.}
\PYG{c+c1}{\PYGZsh{} The output will be much more verbose, and the code will slow down by \PYGZti{}20\PYGZpc{}.}
\PYG{c+c1}{\PYGZsh{}DEBUGFLAG = \PYGZhy{}DDEBUG}

\PYG{n+nv}{FCPP}    \PYG{o}{=} cpp \PYGZhy{}C \PYGZhy{}nostdinc
\PYG{n+nv}{F90free} \PYG{o}{=} mpiifort \PYGZhy{}free \PYGZhy{}qopenmp \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo
\PYG{n+nv}{LINK}    \PYG{o}{=} mpiifort \PYGZhy{}qopenmp \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo
\PYG{c+c1}{\PYGZsh{} We need the \PYGZhy{}fp\PYGZhy{}model procise to pass the testsuite.}
\PYG{n+nv}{FOPTS}   \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}fp\PYGZhy{}model \PYG{n+nb}{source}
\PYG{n+nv}{FNOOPTS} \PYG{o}{=} \PYGZhy{}O2 \PYGZhy{}fp\PYGZhy{}model \PYG{n+nb}{source} \PYGZhy{}no\PYGZhy{}ip
\PYG{c+c1}{\PYGZsh{}FOPTS   = \PYGZhy{}g \PYGZhy{}O0 \PYGZhy{}check all \PYGZhy{}Warn all \PYGZhy{}traceback}
\PYG{c+c1}{\PYGZsh{}FNOOPTS = \PYGZdl{}(FOPTS)}
\PYG{n+nv}{MOD\PYGZus{}OPT} \PYG{o}{=} \PYGZhy{}module
\PYG{n+nv}{INCFLAG} \PYG{o}{=} \PYGZhy{}I

\PYG{n+nv}{C\PYGZus{}PARAFLAG} \PYG{o}{=} \PYGZhy{}DPARA \PYGZhy{}DMPICH\PYGZus{}IGNORE\PYGZus{}CXX\PYGZus{}SEEK
\PYG{n+nv}{CC\PYGZus{}COMP} \PYG{o}{=} mpiicpc
\PYG{n+nv}{C\PYGZus{}COMP}  \PYG{o}{=} mpiicc
\PYG{n+nv}{C\PYGZus{}LINK}  \PYG{o}{=} mpiicpc
\PYG{n+nv}{C\PYGZus{}OPTS}  \PYG{o}{=} \PYGZhy{}O3 \PYGZhy{}ip \PYGZhy{}no\PYGZhy{}ipo \PYGZhy{}qopenmp
\PYG{n+nv}{C\PYGZus{}DEBUGFLAG} \PYG{o}{=}

\PYG{n+nv}{REMOVE}  \PYG{o}{=} /bin/rm \PYGZhy{}f

\PYG{c+c1}{\PYGZsh{} Math Libraries}
\PYG{c+c1}{\PYGZsh{}}
\PYG{n+nv}{MKLPATH}      \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLROOT\PYG{k}{)}/lib/intel64

\PYG{n+nv}{FFTWLIB}      \PYG{o}{=}      \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}start\PYGZhy{}group \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}thread.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}core.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}end\PYGZhy{}group \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{n+nv}{FFTWINCLUDE}  \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLROOT\PYG{k}{)}/include/fftw


\PYG{n+nv}{LAPACKLIB}    \PYG{o}{=} \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}start\PYGZhy{}group \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}intel\PYGZus{}thread.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}core.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}blacs\PYGZus{}intelmpi\PYGZus{}lp64.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}Wl,\PYGZhy{}\PYGZhy{}end\PYGZhy{}group \PYGZhy{}liomp5 \PYGZhy{}lpthread \PYGZhy{}lm \PYGZhy{}ldl
\PYG{n+nv}{SCALAPACKLIB} \PYG{o}{=} \PYG{k}{\PYGZdl{}(}MKLPATH\PYG{k}{)}/libmkl\PYGZus{}scalapack\PYGZus{}lp64.a

\PYG{n+nv}{HDF5PATH}     \PYG{o}{=}  /opt/software/BerkeleyGW\PYGZhy{}3.0.1/hdf5/lib
\PYG{n+nv}{HDF5LIB}      \PYG{o}{=}      \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5hl\PYGZus{}fortran.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5\PYGZus{}hl.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5\PYGZus{}fortran.a \PYG{l+s+se}{\PYGZbs{}}
            \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/libhdf5.a \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}lz
\PYG{n+nv}{HDF5INCLUDE}  \PYG{o}{=} \PYG{k}{\PYGZdl{}(}HDF5PATH\PYG{k}{)}/../include

\PYG{n+nv}{TESTSCRIPT} \PYG{o}{=}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Compile

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make \PYGZhy{}j N all\PYGZhy{}flavors \PYG{o}{(}N is the number of cores\PYG{o}{)}
\end{sphinxVerbatim}


\chapter{Tutorials}
\label{\detokenize{tutorial:tutorials}}\label{\detokenize{tutorial::doc}}

\section{VASP}
\label{\detokenize{tutorial:vasp}}

\subsection{Mobility Calculation}
\label{\detokenize{tutorials/vasp/mobility:mobility-calculation}}\label{\detokenize{tutorials/vasp/mobility::doc}}
\sphinxAtStartPar
载流子迁移率通常指半导体内部电子和空穴整体的运动快慢情况，是衡量半导体器件性能的重要物理量。2004年，石墨烯的成功剥离引起了研究人员对于二维材料性质探索的浓厚兴趣。石墨烯、黑磷等二维材料展现出的高载流子迁移率是其中的一个重要研究课题，科研人员在理论计算方面已经做了大量的工作。由于电子在运动过程中不仅受到外电场力的作用，还会不断的与晶格、杂质、缺陷等发生无规则的碰撞，大大增加了理论计算的难度。

\sphinxAtStartPar
目前计算载流子迁移率比较常用的理论是形变势理论和玻尔兹曼输运理论，前者没有考虑电子和声子（晶格振动）以及电子与电子之间的相互作用等因素，计算结果存在一定的误差，但笔者的计算结果与实验值在数量级上是吻合的；玻尔兹曼输运理论的一种计算考虑了电子\sphinxhyphen{}声子的相互作用，基于第一性原理计算和最大局域化wannier函数插值方法，借助于 \sphinxhref{http://www.quantum-espresso.org/}{Quantum\sphinxhyphen{}ESPRESSO}%
\begin{footnote}[25]\sphinxAtStartFootnote
\sphinxnolinkurl{http://www.quantum-espresso.org/}
%
\end{footnote} 和 \sphinxhref{https://epw-code.org/}{EPW}%
\begin{footnote}[26]\sphinxAtStartFootnote
\sphinxnolinkurl{https://epw-code.org/}
%
\end{footnote} 软件可以完成载流子迁移率计算。缺点是计算量太大，一般的课题组很难承受起高昂的计算费用，另外EPW软件对于二维材料的计算存在部分问题，在其官方论坛也有讨论，计算过程在后续文章中会提到。

\sphinxAtStartPar
本文以形变势理论方法为基础，详细介绍了二维InSe的电子和空穴的有效质量与载流子迁移率的计算方法。


\subsubsection{理论基础}
\label{\detokenize{tutorials/vasp/mobility:id1}}
\sphinxAtStartPar
基于 \sphinxhref{https://doi.org/10.1103/PhysRev.80.72}{Bardeen and Shockley}%
\begin{footnote}[27]\sphinxAtStartFootnote
\sphinxnolinkurl{https://doi.org/10.1103/PhysRev.80.72}
%
\end{footnote} 提出的形变势理论，二维材料载流子迁移率可以根据下式计算：
\begin{equation*}
\begin{split}\mu_{\rm 2D} = \frac{e\hbar^3C_{2D}}{k_BTm^{\ast}m_dE_1^2}\end{split}
\end{equation*}
\sphinxAtStartPar
其中， \(m^{\ast}\) 是传输方向上的有效质量， \(T\) 是温度， \(k_B\) 是玻尔兹曼常数 \(E_1\) 表示沿着传输方向上位于价带顶（VBM）的空穴或聚于导带底（CBM）的电子的形变势常数，由公式 \(E_1 = {\Delta}E/({\Delta}l/l_o)\) 确定， \({\Delta}E\) 为在压缩或拉伸应变下CBM或VBM 的能量变化， \(l_0\) 是传输方向上的晶格常数， \({\Delta}l\) 是 \(l_0\) 的变形量。 \(m_d\) 是载流子的平均有效质量，由公式 \(m_d = \sqrt{m_x^{\ast}m_y^{\ast}}\) 定义。 \(C_{2D}\) 是均匀变形晶体的弹性模量，对于2D材料，弹性模量可以通过公式 \(C_{2D}=2[{\partial}^2E/{\partial}({\Delta}l/l_0)^2]/S_0\) 来计算，其中 \(E\) 是总能量， \(S_0\) 是优化后的面积。

\sphinxAtStartPar
下面对公式中的单位（量纲）做一个简单换算，具体如下：

\begin{DUlineblock}{0em}
\item[] \(m_d = \sqrt{m_x^{\ast}m_y^{\ast}}\) (Kg)
\item[] \(E_1 = {\Delta}E/({\Delta}l/l_o)\) (J) 在VASP中 \({\Delta}E\) 的单位是eV，1 eV = 1.6 \(\times\) 10 \(^{-19}\) J
\item[] \(C_{2D} = 2[{\partial}^2E/{\partial}({\Delta}l/l_0)^2]/S_0\) (J/m \(^2\) ) 其中 \(E\) 是总能（eV）， \(S_0\) 表示面积（ \(Å^2\) ）
\item[] \(e\) : \(1.6 \times 10^{-19}\) C
\item[] \(h\) : \(6.626 \times 10^{-34}\) \(J \cdot s\)
\item[] \(k_B\) : \(1.38 \times 10^{-23}\) J/K
\item[] \(m^{\ast}\) : Kg
\end{DUlineblock}

\sphinxAtStartPar
换算过程：
\begin{equation*}
\begin{split}C \cdot J^3 \cdot s^3 \cdot \frac{J}{m^2} = \frac{C \cdot J \cdot s^3}{m^2 \cdot Kg^2}
= \frac{C \cdot J}{\frac{m^2 \cdot Kg^2}{s^3} \cdot \frac{s}{s} \cdot \frac{m^2}{m^2}}
= \frac{C \cdot J}{\frac{s}{m^2} \frac{m^4 \cdot Kg^2}{s^4}}
= \frac{m^2}{s} \cdot \frac{C}{J} = m^2 \cdot s^{-1} \cdot V^{-1}\end{split}
\end{equation*}\begin{equation*}
\begin{split}= 10^4 \times cm^2 \cdot s^{-1} \cdot V^{-1}\end{split}
\end{equation*}
\sphinxAtStartPar
其中： \(1 V = 1 J/C\) ， \(1 J = 1Kg \cdot m^2 / s^2\)


\subsubsection{计算与数据处理工具}
\label{\detokenize{tutorials/vasp/mobility:id2}}
\begin{DUlineblock}{0em}
\item[] VASP.5.4.4软件 (可以手动控制优化晶格方向)
\item[] OriginLab软件
\item[] Excel
\item[] Materials Studio软件
\item[] 正格矢到倒格矢转化脚本，来源于 \sphinxhref{http://muchong.com/bbs/viewthread.php?tid=7149817\&fpage=1}{小木虫}%
\begin{footnote}[28]\sphinxAtStartFootnote
\sphinxnolinkurl{http://muchong.com/bbs/viewthread.php?tid=7149817\&fpage=1}
%
\end{footnote}
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}! /usr/bin/python}
\PYG{c+c1}{\PYGZsh{} This program reads in base vectors from a given file, calculates reciprocal vectors}
\PYG{c+c1}{\PYGZsh{} then writes to outfile in different units}
\PYG{c+c1}{\PYGZsh{} LinuxUsage: crecip.py infile outfile}
\PYG{c+c1}{\PYGZsh{} Note:  the infile must be in the form below:}
\PYG{c+c1}{\PYGZsh{}   inunit  ang/bohr}
\PYG{c+c1}{\PYGZsh{}   \PYGZus{}begin\PYGZus{}vectors}
\PYG{c+c1}{\PYGZsh{}     46.300000000   0.000000000   0.000000000}
\PYG{c+c1}{\PYGZsh{}      0.000000000  40.500000000   0.000000000}
\PYG{c+c1}{\PYGZsh{}      0.000000000   0.000000000  10.000000000}
\PYG{c+c1}{\PYGZsh{}   \PYGZus{}end\PYGZus{}vectors}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Note: LATTICE VECTORS ARE SPECIFIED IN ROWS !}
\PYG{k}{def} \PYG{n+nf}{GetInUnit}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{inunit} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{k}{for} \PYG{n}{line} \PYG{o+ow}{in} \PYG{n}{incontent}\PYG{p}{:}
        \PYG{k}{if} \PYG{n}{line}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{inunit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{:}
            \PYG{n}{inunit} \PYG{o}{=} \PYG{n}{line}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
            \PYG{k}{break}
    \PYG{k}{return} \PYG{n}{inunit}
\PYG{k}{def} \PYG{n+nf}{GetVectors}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{indstart} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{n}{indend} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{k}{for} \PYG{n}{s} \PYG{o+ow}{in} \PYG{n}{incontent}\PYG{p}{:}
        \PYG{k}{if} \PYG{n}{s}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}begin\PYGZus{}vectors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{!=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{:}
            \PYG{n}{indstart} \PYG{o}{=} \PYG{n}{incontent}\PYG{o}{.}\PYG{n}{index}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}
        \PYG{k}{else}\PYG{p}{:}
            \PYG{k}{if} \PYG{n}{s}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}end\PYGZus{}vectors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{!=} \PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{:}
                \PYG{n}{indend} \PYG{o}{=} \PYG{n}{incontent}\PYG{o}{.}\PYG{n}{index}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}
    \PYG{n}{result} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(} \PYG{n}{indstart} \PYG{o}{+} \PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{indend} \PYG{p}{)}\PYG{p}{:}
        \PYG{n}{line} \PYG{o}{=} \PYG{n}{incontent}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{result}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{p}{[} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{line}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)} \PYG{p}{]} \PYG{p}{)}
    \PYG{k}{return} \PYG{n}{result}
\PYG{k}{def} \PYG{n+nf}{Ang2Bohr}\PYG{p}{(} \PYG{n}{LattVecAng} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{LattVecBohr} \PYG{o}{=} \PYG{n}{LattVecAng}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{j} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{LattVecBohr}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{n}{LattVecAng}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{*}  \PYG{l+m+mf}{1.8897261246}
    \PYG{k}{return} \PYG{n}{LattVecBohr}
\PYG{k}{def} \PYG{n+nf}{DotProduct}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{,} \PYG{n}{v2} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{dotproduct} \PYG{o}{=} \PYG{l+m+mf}{0.0}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{dotproduct} \PYG{o}{=} \PYG{n}{dotproduct} \PYG{o}{+} \PYG{n}{v1}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}
    \PYG{k}{return} \PYG{n}{dotproduct}
\PYG{k}{def} \PYG{n+nf}{CrossProduct}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{,} \PYG{n}{v2} \PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} v3 = v1 WILL LEAD TO WRONG RESULT}
    \PYG{n}{v3} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{p}{)}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]} \PYG{p}{)}
    \PYG{n}{v3}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{v1}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{*} \PYG{n}{v2}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{p}{)}
    \PYG{k}{return} \PYG{n}{v3}
\PYG{k}{def} \PYG{n+nf}{CalcRecVectors}\PYG{p}{(} \PYG{n}{lattvec} \PYG{p}{)}\PYG{p}{:}
    \PYG{n}{pi} \PYG{o}{=} \PYG{l+m+mf}{3.141592653589793}
    \PYG{n}{a1} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
    \PYG{n}{a2} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
    \PYG{n}{a3} \PYG{o}{=} \PYG{n}{lattvec}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}
    \PYG{n}{b1} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a2}\PYG{p}{,} \PYG{n}{a3} \PYG{p}{)}
    \PYG{n}{b2} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a3}\PYG{p}{,} \PYG{n}{a1} \PYG{p}{)}
    \PYG{n}{b3} \PYG{o}{=} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a1}\PYG{p}{,} \PYG{n}{a2} \PYG{p}{)}
    \PYG{n}{volume} \PYG{o}{=} \PYG{n}{DotProduct}\PYG{p}{(} \PYG{n}{a1}\PYG{p}{,} \PYG{n}{CrossProduct}\PYG{p}{(} \PYG{n}{a2}\PYG{p}{,} \PYG{n}{a3} \PYG{p}{)} \PYG{p}{)}
    \PYG{n}{RecVec} \PYG{o}{=} \PYG{p}{[} \PYG{n}{b1}\PYG{p}{,} \PYG{n}{b2}\PYG{p}{,} \PYG{n}{b3} \PYG{p}{]}
    \PYG{c+c1}{\PYGZsh{} it follows the definition for b\PYGZus{}j: a\PYGZus{}i * b\PYGZus{}j = 2pi * delta(i,j)}
    \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{j} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{:}
            \PYG{n}{RecVec}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{n}{RecVec}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{2} \PYG{o}{*} \PYG{n}{pi} \PYG{o}{/} \PYG{n}{volume}
    \PYG{k}{return} \PYG{n}{RecVec}
\PYG{k}{def} \PYG{n+nf}{main}\PYG{p}{(}\PYG{n}{argv} \PYG{o}{=} \PYG{k+kc}{None}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{argv} \PYG{o}{=} \PYG{n}{sys}\PYG{o}{.}\PYG{n}{argv}
    \PYG{n}{infilename}  \PYG{o}{=} \PYG{n}{argv}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
    \PYG{n}{outfilename} \PYG{o}{=} \PYG{n}{argv}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}
    \PYG{n}{pi} \PYG{o}{=} \PYG{l+m+mf}{3.141592653589793}
    \PYG{n}{bohr2ang} \PYG{o}{=} \PYG{l+m+mf}{0.5291772109253}
    \PYG{n}{ang2bohr} \PYG{o}{=} \PYG{l+m+mf}{1.889726124546}
    \PYG{n}{infile}  \PYG{o}{=} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{infilename}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{incontent} \PYG{o}{=} \PYG{n}{infile}\PYG{o}{.}\PYG{n}{readlines}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{infile}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{inunit} \PYG{o}{=} \PYG{n}{GetInUnit}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}
    \PYG{n}{LattVectors} \PYG{o}{=} \PYG{n}{GetVectors}\PYG{p}{(} \PYG{n}{incontent} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} convert units from ang to bohr}
    \PYG{k}{if} \PYG{n}{inunit} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ang}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
        \PYG{n}{LattVectors} \PYG{o}{=} \PYG{n}{Ang2Bohr}\PYG{p}{(} \PYG{n}{LattVectors} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} calculate reciprocal vectors in 1/bohr}
    \PYG{n}{RecVectors} \PYG{o}{=} \PYG{n}{CalcRecVectors}\PYG{p}{(} \PYG{n}{LattVectors} \PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} open outfile for output}
    \PYG{n}{ofile} \PYG{o}{=} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfilename}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output lattice vectors in bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lattice vectors in bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{LattVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output lattice vectors in ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{bohr2ang}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lattice vectors in ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{LattVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 1/bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 1/bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 1/ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{ang2bohr}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 1/ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 2pi/bohr}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{l+m+mf}{1.0}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{2.0}\PYG{o}{*}\PYG{n}{pi}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 2pi/bohr:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} output reciprocal vectors in 2pi/ang}
    \PYG{n}{convfac} \PYG{o}{=} \PYG{n}{ang2bohr}\PYG{o}{/}\PYG{p}{(}\PYG{l+m+mf}{2.0}\PYG{o}{*}\PYG{n}{pi}\PYG{p}{)}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reciprocal vectors in 2pi/ang:}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{vi} \PYG{o+ow}{in} \PYG{n}{RecVectors}\PYG{p}{:}
        \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+si}{\PYGZpc{}14.9f}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}} \PYG{p}{(}\PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{,} \PYG{n}{vi}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{o}{*}\PYG{n}{convfac}\PYG{p}{)}\PYG{p}{)}
    \PYG{c+c1}{\PYGZsh{} close}
    \PYG{n}{ofile}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{l+m+mi}{0}
\PYG{k}{if} \PYG{n+nv+vm}{\PYGZus{}\PYGZus{}name\PYGZus{}\PYGZus{}} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}\PYGZus{}main\PYGZus{}\PYGZus{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
   \PYG{k+kn}{import} \PYG{n+nn}{sys}
   \PYG{n}{sys}\PYG{o}{.}\PYG{n}{exit}\PYG{p}{(}\PYG{n}{main}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\subsubsection{二维InSe有效质量计算过程}
\label{\detokenize{tutorials/vasp/mobility:inse}}

\paragraph{建模}
\label{\detokenize{tutorials/vasp/mobility:id4}}
\sphinxAtStartPar
由于计算过程中需要对二维InSe施加应变，但二维InSe原胞是六角结构，不容易施加应变。但是侯柱峰老师讲了对石墨烯原胞施加应变的方法，笔者认为虽然可行，但过于繁琐，故不采用此法。我们可以利用根号建模的方法讲六角结构InSe原胞变为方形结构的InSe超胞，然后施加应变可大大提高操作效率，但计算量的增加在可接受范围之内。下面给出关键的建模步骤，更多的根号建模部分可参考我的往期博客文章。

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{2D-InSe-mobility}.png}
\end{figure}


\paragraph{能带计算}
\label{\detokenize{tutorials/vasp/mobility:id5}}

\subparagraph{结构优化}
\label{\detokenize{tutorials/vasp/mobility:id6}}
\begin{DUlineblock}{0em}
\item[] INCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{SYSTEM} \PYG{o}{=} InSe
\PYG{n+nv}{ISTART} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{NWRITE} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{PREC}   \PYG{o}{=} Accurate
\PYG{n+nv}{ENCUT}  \PYG{o}{=} \PYG{l+m}{500}
\PYG{n+nv}{GGA}    \PYG{o}{=} PE
\PYG{n+nv}{NSW}    \PYG{o}{=} \PYG{l+m}{200}
\PYG{n+nv}{ISIF}   \PYG{o}{=} \PYG{l+m}{3}
\PYG{n+nv}{ISYM}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{IBRION} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{NELM}   \PYG{o}{=} \PYG{l+m}{80}
\PYG{n+nv}{EDIFF}  \PYG{o}{=} 1E\PYGZhy{}05
\PYG{n+nv}{EDIFFG} \PYG{o}{=} \PYGZhy{}0.01
\PYG{n+nv}{ALGO}   \PYG{o}{=} Normal
\PYG{n+nv}{LDIAG}  \PYG{o}{=} .TRUE.
\PYG{n+nv}{LREAL}  \PYG{o}{=} .FALSE.
\PYG{n+nv}{ISMEAR} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{SIGMA}  \PYG{o}{=} \PYG{l+m}{0}.05
\PYG{n+nv}{ICHARG} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{LWAVE}  \PYG{o}{=}  .FALSE.
\PYG{n+nv}{LCHARG} \PYG{o}{=} .FALSE.
\PYG{n+nv}{NPAR}   \PYG{o}{=} \PYG{l+m}{4}
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] KPOINTS
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Monkhorst Pack
\PYG{l+m}{0}
Gamma
 \PYG{l+m}{11}   \PYG{l+m}{7}   \PYG{l+m}{1}
.0   .0   .0
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POSCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
  Se   In
  \PYG{l+m}{1}.000
       \PYG{l+m}{4}.083622259999999      \PYGZhy{}0.000000000000001       \PYG{l+m}{0}.000000000000000
       \PYG{l+m}{0}.000000000000000       \PYG{l+m}{7}.073041233239241       \PYG{l+m}{0}.000000000000000
       \PYG{l+m}{0}.000000000000000       \PYG{l+m}{0}.000000000000000      \PYG{l+m}{25}.377516849029359
  Se   In
  \PYG{l+m}{4}   \PYG{l+m}{4}
Direct
  \PYG{l+m}{0}.5000005000000000   \PYG{l+m}{0}.1666665000000000   \PYG{l+m}{0}.5271404971815050   !Se
  \PYG{l+m}{0}.0000004999999997   \PYG{l+m}{0}.6666665000000004   \PYG{l+m}{0}.5271404971815050   !Se
  \PYG{l+m}{0}.5000005000000000   \PYG{l+m}{0}.1666665000000000   \PYG{l+m}{0}.3152396685456632   !Se
  \PYG{l+m}{0}.0000004999999997   \PYG{l+m}{0}.6666665000000004   \PYG{l+m}{0}.3152396685456632   !Se
  \PYG{l+m}{0}.4999995000000003   \PYG{l+m}{0}.8333335000000002   \PYG{l+m}{0}.4767849697227853   !In
 \PYGZhy{}0.0000005000000000   \PYG{l+m}{0}.3333335000000000   \PYG{l+m}{0}.4767849697227853   !In
  \PYG{l+m}{0}.4999995000000003   \PYG{l+m}{0}.8333335000000002   \PYG{l+m}{0}.3655951960043828   !In
 \PYGZhy{}0.0000005000000000   \PYG{l+m}{0}.3333335000000000   \PYG{l+m}{0}.3655951960043828   !In
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POTCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cat Se/POTCAR In\PYGZus{}d/POTCAR \PYGZgt{} POTCAR
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] OPTCELL
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{100}
\PYG{l+m}{010}
\PYG{l+m}{000}
\end{sphinxVerbatim}


\subparagraph{静态自洽}
\label{\detokenize{tutorials/vasp/mobility:id7}}
\begin{DUlineblock}{0em}
\item[] INCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{SYSTEM} \PYG{o}{=} InSe
\PYG{n+nv}{ISTART} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{NWRITE} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{PREC}   \PYG{o}{=} Accurate
\PYG{n+nv}{ENCUT}  \PYG{o}{=} \PYG{l+m}{500}
\PYG{n+nv}{GGA}    \PYG{o}{=} PE
\PYG{n+nv}{NSW}    \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{ISIF}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{ISYM}   \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{IBRION} \PYG{o}{=} \PYGZhy{}1
\PYG{n+nv}{NELM}   \PYG{o}{=} \PYG{l+m}{80}
\PYG{n+nv}{EDIFF}  \PYG{o}{=} 1E\PYGZhy{}05
\PYG{n+nv}{EDIFFG} \PYG{o}{=} \PYGZhy{}0.01
\PYG{n+nv}{ALGO}   \PYG{o}{=} Normal
\PYG{n+nv}{LDIAG}  \PYG{o}{=} .TRUE.
\PYG{n+nv}{LREAL}  \PYG{o}{=} .FALSE.
\PYG{n+nv}{ISMEAR} \PYG{o}{=} \PYG{l+m}{0}
\PYG{n+nv}{SIGMA}  \PYG{o}{=} \PYG{l+m}{0}.05
\PYG{n+nv}{ICHARG} \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{NPAR}   \PYG{o}{=} \PYG{l+m}{4}
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] KPOINTS
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Monkhorst Pack
\PYG{l+m}{0}
Gamma
 \PYG{l+m}{21}   \PYG{l+m}{13}   \PYG{l+m}{1}
.0   .0   .0
\end{sphinxVerbatim}

\begin{DUlineblock}{0em}
\item[] POSCAR
\end{DUlineblock}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cp CONTCAR scf/POSCAR
\end{sphinxVerbatim}


\subparagraph{能带计算}
\label{\detokenize{tutorials/vasp/mobility:id8}}

\subsection{Formation Energy Calculation}
\label{\detokenize{tutorials/vasp/formation_energy:formation-energy-calculation}}\label{\detokenize{tutorials/vasp/formation_energy::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/usr/bin/env python3}

\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{读取POSCAR与OUTCAR文件，自动计算形成能}
\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}

\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{以字典的形式定义每个原子的能量，需要从Materials Project库里查找补充}
\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{n}{Energy\PYGZus{}atom} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{O}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{4.9480}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Mg}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.6003}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Ca}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.9995}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Zn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.2595}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Cu}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{4.0992}\PYG{p}{,}
               \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sr}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.6895}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Cd}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.9062}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Ba}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.9190}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Yb}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.5396}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Pt}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{6.0709}\PYG{p}{,}
               \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Pd}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{3.7126}
              \PYG{p}{\PYGZcb{}}

\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{读取POSCAR文件，计算原子的总数和总能}
\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{POSCAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{encoding}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{utf\PYGZhy{}8}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{poscar}\PYG{p}{:}
    \PYG{n}{list\PYGZus{}poscar} \PYG{o}{=} \PYG{n}{poscar}\PYG{o}{.}\PYG{n}{readlines}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{list\PYGZus{}poscar}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{list\PYGZus{}poscar}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]} \PYG{o}{=} \PYG{n}{list\PYGZus{}poscar}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{list\PYGZus{}element} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{list\PYGZus{}poscar}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+se}{\PYGZbs{}t}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} print(\PYGZdq{}list\PYGZus{}element = \PYGZdq{}, list\PYGZus{}element)}
\PYG{n}{list\PYGZus{}num\PYGZus{}element} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{list\PYGZus{}poscar}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+se}{\PYGZbs{}t}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} print(\PYGZdq{}list\PYGZus{}num\PYGZus{}element = \PYGZdq{}, list\PYGZus{}num\PYGZus{}element)}
\PYG{n}{total\PYGZus{}atoms} \PYG{o}{=} \PYG{l+m+mi}{0}
\PYG{n}{Toten\PYGZus{}atoms} \PYG{o}{=} \PYG{l+m+mi}{0}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{list\PYGZus{}element}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{total\PYGZus{}atoms} \PYG{o}{=} \PYG{n}{total\PYGZus{}atoms} \PYG{o}{+} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{list\PYGZus{}num\PYGZus{}element}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{Toten\PYGZus{}atoms} \PYG{o}{=} \PYG{n}{Toten\PYGZus{}atoms} \PYG{o}{+} \PYG{n}{Energy\PYGZus{}atom}\PYG{p}{[}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{list\PYGZus{}element}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}\PYG{p}{]}\PYG{o}{*}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{list\PYGZus{}num\PYGZus{}element}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} print(\PYGZdq{}total\PYGZus{}atoms = \PYGZdq{}, total\PYGZus{}atoms)}
\PYG{c+c1}{\PYGZsh{} print(\PYGZdq{}Toten\PYGZus{}atoms = \PYGZdq{}, Toten\PYGZus{}atoms)}

\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{读取OUTCAR文件获得体系总能}
\PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{OUTCAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{encoding}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{utf\PYGZhy{}8}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{f}\PYG{p}{:}
    \PYG{n}{lines} \PYG{o}{=} \PYG{n}{f}\PYG{o}{.}\PYG{n}{readlines}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{for} \PYG{n}{line} \PYG{o+ow}{in} \PYG{n}{lines}\PYG{p}{:}
        \PYG{k}{if} \PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TOTEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{in} \PYG{n}{line}\PYG{p}{)}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{} print(line.rstrip(\PYGZsq{}\PYGZbs{}n\PYGZsq{}))}
            \PYG{n}{list\PYGZus{}TOTEN} \PYG{o}{=} \PYG{n}{line}
\PYG{n}{Toten\PYGZus{}system} \PYG{o}{=} \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{list\PYGZus{}TOTEN}\PYG{o}{.}\PYG{n}{rstrip}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{p}{)}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}

\PYG{n}{Ef} \PYG{o}{=} \PYG{p}{(}\PYG{n}{Toten\PYGZus{}system}\PYG{o}{\PYGZhy{}}\PYG{n}{Toten\PYGZus{}atoms}\PYG{p}{)}\PYG{o}{/}\PYG{n}{total\PYGZus{}atoms}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Ef = }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.3f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n}{Ef}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{eV/atom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\section{BerkeleyGW}
\label{\detokenize{tutorial:berkeleygw}}

\subsection{GW计算过程}
\label{\detokenize{tutorials/berkeleygw/gw:gw}}\label{\detokenize{tutorials/berkeleygw/gw::doc}}\begin{itemize}
\item {} 
\sphinxAtStartPar
计算所需的文件结构如下：

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
├── \PYG{l+m}{5}\PYGZhy{}epsilon
│   ├── bash
│   └── epsilon.inp
├── \PYG{l+m}{6}\PYGZhy{}sigma
│   ├── bash
│   ├── eqp.py
│   └── sigma.inp
├── \PYG{l+m}{7}\PYGZhy{}kernel
│   ├── bash
│   └── kernel.inp
├── \PYG{l+m}{8}\PYGZhy{}absorption
│   ├── absorption.inp
│   └── bash
├── \PYG{l+m}{9}\PYGZhy{}inteqp
│   ├── bash
│   └── inteqp.inp
└── ESPRESSO
    ├── \PYG{l+m}{0}\PYGZhy{}kgrid
    │   ├── script\PYGZus{}0
    │   ├── WFN\PYGZus{}fi.in
    │   ├── WFN\PYGZus{}fiq.in
    │   ├── WFN.in
    │   └── WFNq.in
    ├── \PYG{l+m}{1}\PYGZhy{}scf
    │   ├── bash
    │   ├── B.SG15.PBE.UPF
    │   ├── input
    │   └── N.SG15.PBE.UPF
    ├── \PYG{l+m}{2}\PYGZhy{}wfn
    │   ├── bash
    │   ├── degeneracy\PYGZus{}check.x
    │   ├── input
    │   └── pp\PYGZus{}in
    ├── \PYG{l+m}{3}\PYGZhy{}wfnq
    │   ├── bash
    │   ├── input
    │   └── pp\PYGZus{}in
    ├── \PYG{l+m}{5}\PYGZhy{}wfn\PYGZus{}fi
    │   ├── bash
    │   ├── input
    │   └── pp\PYGZus{}in
    ├── \PYG{l+m}{6}\PYGZhy{}wfn\PYGZus{}fiq
    │   ├── bash
    │   ├── input
    │   └── pp\PYGZus{}in
    ├── \PYG{l+m}{7}\PYGZhy{}band
    │   ├── bash
    │   ├── input
    │   └── pp\PYGZus{}in
    └── script\PYGZus{}1
\end{sphinxVerbatim}


\subsubsection{Quantum ESPRESSO计算}
\label{\detokenize{tutorials/berkeleygw/gw:quantum-espresso}}

\paragraph{0\sphinxhyphen{}kgrid文件修改}
\label{\detokenize{tutorials/berkeleygw/gw:kgrid}}\begin{itemize}
\item {} 
\sphinxAtStartPar
WFN.in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{5}   \PYG{l+m}{5}   \PYG{l+m}{1}         \PYG{c+c1}{\PYGZsh{} k点网格}
\PYG{l+m}{0}.0  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0
\PYG{l+m}{0}.0  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000  \PYG{c+c1}{\PYGZsh{} 晶格常数}
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000  \PYG{c+c1}{\PYGZsh{} 晶格常数}
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000  \PYG{c+c1}{\PYGZsh{} 晶格常数}

\PYG{l+m}{4} \PYG{c+c1}{\PYGZsh{} 原子总数}
 \PYG{l+m}{1}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000 \PYG{c+c1}{\PYGZsh{} 第一个原子分数坐标}
 \PYG{l+m}{1}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000 \PYG{c+c1}{\PYGZsh{} 第二个原子分数坐标}
 \PYG{l+m}{2}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000 \PYG{c+c1}{\PYGZsh{} 第三个原子分数坐标}
 \PYG{l+m}{2}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000 \PYG{c+c1}{\PYGZsh{} 第四个原子分数坐标}
\PYG{l+m}{24} \PYG{l+m}{24} \PYG{l+m}{81} \PYG{c+c1}{\PYGZsh{} 傅里叶变换网格}
.false.
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
WFNq.in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{5}   \PYG{l+m}{5}   \PYG{l+m}{1}
\PYG{l+m}{0}.0    \PYG{l+m}{0}.0  \PYG{l+m}{0}.0
\PYG{l+m}{0}.001  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0 \PYG{c+c1}{\PYGZsh{} 第一个数变为0.001}
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000

\PYG{l+m}{4}
 \PYG{l+m}{1}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
 \PYG{l+m}{1}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
\PYG{l+m}{24} \PYG{l+m}{24} \PYG{l+m}{81}
.false.
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
WFN\_fi.in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{7}   \PYG{l+m}{7}   \PYG{l+m}{1}    \PYG{c+c1}{\PYGZsh{} k点网格变密，根据服务器计算能力修改}
\PYG{l+m}{0}.0  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0
\PYG{l+m}{0}.0  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000

\PYG{l+m}{4}
 \PYG{l+m}{1}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
 \PYG{l+m}{1}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
\PYG{l+m}{24} \PYG{l+m}{24} \PYG{l+m}{81}
.false.
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
WFN\_fiq.in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{7}   \PYG{l+m}{7}   \PYG{l+m}{1}
\PYG{l+m}{0}.0    \PYG{l+m}{0}.0    \PYG{l+m}{0}.0
\PYG{l+m}{0}.001  \PYG{l+m}{0}.001  \PYG{l+m}{0}.0 \PYG{c+c1}{\PYGZsh{} 第一个与第二个数变为0.001}
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000

\PYG{l+m}{4}
 \PYG{l+m}{1}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
 \PYG{l+m}{1}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
 \PYG{l+m}{2}     \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
\PYG{l+m}{24} \PYG{l+m}{24} \PYG{l+m}{81}
.false.
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
script\_0

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}

\PYG{c+c1}{\PYGZsh{}}
\PYG{n+nv}{KGRID}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}/home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/kgrid.x\PYGZdq{}} \PYG{c+c1}{\PYGZsh{}修改BerkeleyGW路径}

\PYG{c+c1}{\PYGZsh{}}
\PYG{n+nv}{\PYGZdl{}KGRID} ./WFN.in ./WFN.out ./WFN.log
\PYG{n+nv}{\PYGZdl{}KGRID} ./WFNq.in ./WFNq.out ./WFNq.log
\PYG{c+c1}{\PYGZsh{}\PYGZdl{}KGRID ./WFN\PYGZus{}co.in ./WFN\PYGZus{}co.out ./WFN\PYGZus{}co.log}
\PYG{n+nv}{\PYGZdl{}KGRID} ./WFN\PYGZus{}fi.in ./WFN\PYGZus{}fi.out ./WFN\PYGZus{}fi.log
\PYG{n+nv}{\PYGZdl{}KGRID} ./WFN\PYGZus{}fiq.in ./WFN\PYGZus{}fiq.out ./WFN\PYGZus{}fiq.log

\PYG{n+nb}{cd} ..
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
生成输入文件

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash script\PYGZus{}0
\end{sphinxVerbatim}


\paragraph{链接全局环境变量}
\label{\detokenize{tutorials/berkeleygw/gw:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/bash}
\PYG{c+c1}{\PYGZsh{}}

\PYG{n+nv}{sys}\PYG{o}{=}BN                          \PYG{c+c1}{\PYGZsh{} 体系名称}
\PYG{n+nv}{PO1}\PYG{o}{=}B.SG15.PBE.UPF              \PYG{c+c1}{\PYGZsh{} 势文件名称}
\PYG{n+nv}{PO2}\PYG{o}{=}N.SG15.PBE.UPF              \PYG{c+c1}{\PYGZsh{} 势文件名称}

mkdir ./2\PYGZhy{}wfn/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO1} ./2\PYGZhy{}wfn     \PYG{c+c1}{\PYGZsh{} 连接势文件，如果体系原子增加，相应的势文件也要增加}
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO2} ./2\PYGZhy{}wfn
\PYG{c+c1}{\PYGZsh{}ln \PYGZhy{}s ../1\PYGZhy{}scf/vdW\PYGZus{}kernel\PYGZus{}table ./2\PYGZhy{}wfn}
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/data\PYGZhy{}file\PYGZhy{}schema.xml ./2\PYGZhy{}wfn/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/charge\PYGZhy{}density.dat ./2\PYGZhy{}wfn/\PYG{n+nv}{\PYGZdl{}sys}.save
\PYG{c+c1}{\PYGZsh{}}
mkdir ./3\PYGZhy{}wfnq/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO1} ./3\PYGZhy{}wfnq
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO2} ./3\PYGZhy{}wfnq
\PYG{c+c1}{\PYGZsh{}ln \PYGZhy{}s ../1\PYGZhy{}scf/vdW\PYGZus{}kernel\PYGZus{}table   ./3\PYGZhy{}wfnq}
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/data\PYGZhy{}file\PYGZhy{}schema.xml ./3\PYGZhy{}wfnq/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/charge\PYGZhy{}density.dat ./3\PYGZhy{}wfnq/\PYG{n+nv}{\PYGZdl{}sys}.save
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}}
mkdir ./5\PYGZhy{}wfn\PYGZus{}fi/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO1} ./5\PYGZhy{}wfn\PYGZus{}fi
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO2} ./5\PYGZhy{}wfn\PYGZus{}fi
\PYG{c+c1}{\PYGZsh{}ln \PYGZhy{}s ../1\PYGZhy{}scf/vdW\PYGZus{}kernel\PYGZus{}table   ./5\PYGZhy{}wfn\PYGZus{}fi}
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/data\PYGZhy{}file\PYGZhy{}schema.xml ./5\PYGZhy{}wfn\PYGZus{}fi/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/charge\PYGZhy{}density.dat ./5\PYGZhy{}wfn\PYGZus{}fi/\PYG{n+nv}{\PYGZdl{}sys}.save

mkdir ./6\PYGZhy{}wfn\PYGZus{}fiq/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO1}  ./6\PYGZhy{}wfn\PYGZus{}fiq
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO2}  ./6\PYGZhy{}wfn\PYGZus{}fiq
\PYG{c+c1}{\PYGZsh{}ln \PYGZhy{}s ../1\PYGZhy{}scf/vdW\PYGZus{}kernel\PYGZus{}table   ./6\PYGZhy{}wfn\PYGZus{}fiq}
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/data\PYGZhy{}file\PYGZhy{}schema.xml ./6\PYGZhy{}wfn\PYGZus{}fiq/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/charge\PYGZhy{}density.dat ./6\PYGZhy{}wfn\PYGZus{}fiq/\PYG{n+nv}{\PYGZdl{}sys}.save

mkdir ./7\PYGZhy{}band/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO1}  ./7\PYGZhy{}band
ln \PYGZhy{}s ../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}PO2}  ./7\PYGZhy{}band
\PYG{c+c1}{\PYGZsh{}ln \PYGZhy{}s ../1\PYGZhy{}scf/vdW\PYGZus{}kernel\PYGZus{}table   ./6\PYGZhy{}wfn\PYGZus{}fiq}
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/data\PYGZhy{}file\PYGZhy{}schema.xml ./7\PYGZhy{}band/\PYG{n+nv}{\PYGZdl{}sys}.save
ln \PYGZhy{}s ../../1\PYGZhy{}scf/\PYG{n+nv}{\PYGZdl{}sys}.save/charge\PYGZhy{}density.dat ./7\PYGZhy{}band/\PYG{n+nv}{\PYGZdl{}sys}.save

ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/wfn.complex ../5\PYGZhy{}epsilon/WFN
ln \PYGZhy{}s ../ESPRESSO/3\PYGZhy{}wfnq/wfn.complex ../5\PYGZhy{}epsilon/WFNq
\PYG{c+c1}{\PYGZsh{}}
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/vxc.dat ../6\PYGZhy{}sigma/vxc.dat
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/rho.cplx ../6\PYGZhy{}sigma/RHO
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/wfn.complex ../6\PYGZhy{}sigma/WFN\PYGZus{}inner
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/eps0mat ../6\PYGZhy{}sigma
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/epsmat ../6\PYGZhy{}sigma
\PYG{c+c1}{\PYGZsh{}}
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/wfn.complex ../7\PYGZhy{}kernel/WFN\PYGZus{}co
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/eps0mat ../7\PYGZhy{}kernel
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/epsmat ../7\PYGZhy{}kernel
\PYG{c+c1}{\PYGZsh{}}
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/wfn.complex ../8\PYGZhy{}absorption/WFN\PYGZus{}co
ln \PYGZhy{}s ../ESPRESSO/5\PYGZhy{}wfn\PYGZus{}fi/wfn.complex ../8\PYGZhy{}absorption/WFN\PYGZus{}fi
ln \PYGZhy{}s ../ESPRESSO/6\PYGZhy{}wfn\PYGZus{}fiq/wfn.complex ../8\PYGZhy{}absorption/WFNq\PYGZus{}fi
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/eps0mat ../8\PYGZhy{}absorption
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/epsmat ../8\PYGZhy{}absorption
ln \PYGZhy{}s ../7\PYGZhy{}kernel/bsedmat ../8\PYGZhy{}absorption
ln \PYGZhy{}s ../7\PYGZhy{}kernel/bsexmat ../8\PYGZhy{}absorption
\PYG{c+c1}{\PYGZsh{}}
ln \PYGZhy{}s ../ESPRESSO/2\PYGZhy{}wfn/wfn.complex ../9\PYGZhy{}inteqp/WFN\PYGZus{}co
ln \PYGZhy{}s ../ESPRESSO/7\PYGZhy{}band/wfn.complex ../9\PYGZhy{}inteqp/WFN\PYGZus{}fi
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/eps0mat ../9\PYGZhy{}inteqp
ln \PYGZhy{}s ../5\PYGZhy{}epsilon/epsmat ../9\PYGZhy{}inteqp
\PYG{c+c1}{\PYGZsh{}}
ln \PYGZhy{}s ../8\PYGZhy{}absorption/eqp\PYGZus{}co.dat ../9\PYGZhy{}inteqp
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
运行脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
bash script\PYGZus{}1
\end{sphinxVerbatim}


\paragraph{1\sphinxhyphen{}scf}
\label{\detokenize{tutorials/berkeleygw/gw:scf}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input文件

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
  \PYG{p}{\PYGZam{}}CONTROL
  \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}scf\PYGZsq{}}
  \PYG{n+nv}{etot\PYGZus{}conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d\PYGZhy{}05
  \PYG{n+nv}{forc\PYGZus{}conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{1}.0000000000d\PYGZhy{}04
  \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{tprnfor} \PYG{o}{=} .true.
  \PYG{n+nv}{tstress} \PYG{o}{=} .true.
  \PYG{n+nv}{verbosity} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}high\PYGZsq{}}
  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false.
/
\PYG{p}{\PYGZam{}}SYSTEM
  \PYG{n+nv}{ecutwfc} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d+01
  \PYG{n+nv}{ibrav} \PYG{o}{=} \PYG{l+m}{0}
  \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4}
  \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2}
/
\PYG{p}{\PYGZam{}}ELECTRONS
  \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{1}.0000000000d\PYGZhy{}7
  \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{80}
  \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d\PYGZhy{}01
  \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
  \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
  \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
  \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000  ! 顺序与0\PYGZhy{}kgrid中设置相同
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
K\PYGZus{}POINTS automatic
\PYG{l+m}{15} \PYG{l+m}{15} \PYG{l+m}{5} \PYG{l+m}{0} \PYG{l+m}{0} \PYG{l+m}{0}
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{4}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
rm ./*.wfc*
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{2\sphinxhyphen{}wfn}
\label{\detokenize{tutorials/berkeleygw/gw:wfn}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{p}{\PYGZam{}}CONTROL
                       \PYG{n+nv}{title} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                 \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}bands\PYGZsq{}} ,
                \PYG{n+nv}{restart\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}from\PYGZus{}scratch\PYGZsq{}} ,
                  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false. ,
                      \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                     \PYG{n+nv}{tstress} \PYG{o}{=} .false. ,
                     \PYG{n+nv}{tprnfor} \PYG{o}{=} .false. ,
 /
 \PYG{p}{\PYGZam{}}SYSTEM
                        \PYG{n+nv}{ibrav} \PYG{o}{=}\PYG{l+m}{0},
                         \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4},
                        \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2},
                       \PYG{n+nv}{ecutwfc} \PYG{o}{=}\PYG{l+m}{40},
                       \PYG{n+nv}{nbnd} \PYG{o}{=} \PYG{l+m}{80}, !要求能带是占据态的10倍


 /
 \PYG{p}{\PYGZam{}}ELECTRONS
            \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{100}
            \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=} \PYG{l+m}{1}.0d\PYGZhy{}7
            \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
            \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=} \PYG{l+m}{0}.4
         \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
          \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
          \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000
K\PYGZus{}POINTS crystal ! 来源于0\PYGZhy{}kgrid/WFN.out
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pp\_in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}              ! 体系名称
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{5}               ! k点网格，与WFN.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{5}               ! k点网格，与WFN.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{1}               ! k点网格，与WFN.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{rhog\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{rhog\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}rho.cplx\PYGZsq{}}
   \PYG{n+nv}{vxcg\PYGZus{}flag} \PYG{o}{=} .false.
   \PYG{n+nv}{vxcg\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}vxc.cplx\PYGZsq{}}
   \PYG{n+nv}{vxc\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{vxc\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}vxc.dat\PYGZsq{}}
   \PYG{n+nv}{vxc\PYGZus{}diag\PYGZus{}nmin} \PYG{o}{=} \PYG{l+m}{4}
   \PYG{n+nv}{vxc\PYGZus{}diag\PYGZus{}nmax} \PYG{o}{=} \PYG{l+m}{13}
   \PYG{n+nv}{vxc\PYGZus{}offdiag\PYGZus{}nmin} \PYG{o}{=} \PYG{l+m}{0}
   \PYG{n+nv}{vxc\PYGZus{}offdiag\PYGZus{}nmax} \PYG{o}{=} \PYG{l+m}{0}
/
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{1}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
\PYG{c+c1}{\PYGZsh{}rm ./*.wfc*}
\PYG{c+c1}{\PYGZsh{}rm ./*.igk*}
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
degeneracy\_check.x程序后处理

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
degeneracy\PYGZus{}check.x complex \PYGZgt{}\PYGZgt{} aa
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
aa文件分析

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Reading eigenvalues from file wfn.complex
Number of spins:               \PYG{l+m}{1}
Number of bands:              \PYG{l+m}{80}
Number of k\PYGZhy{}points:           \PYG{n+nv}{25}

\PYG{o}{=}\PYG{o}{=} Degeneracy\PYGZhy{}allowed numbers of bands \PYG{o}{(}\PYG{k}{for} epsilon and sigma\PYG{o}{)} \PYG{o}{=}\PYG{o}{=}
           \PYG{l+m}{1}
           \PYG{l+m}{2}
           \PYG{l+m}{3}
           \PYG{l+m}{4} ! 取为vxc\PYGZus{}diag\PYGZus{}nmin的值
           \PYG{l+m}{6}
           \PYG{l+m}{8}
           \PYG{l+m}{9}
          \PYG{l+m}{10}
          \PYG{l+m}{11}
          \PYG{l+m}{13}
          \PYG{l+m}{15} ! 取为vxc\PYGZus{}diag\PYGZus{}nmax的值
          \PYG{l+m}{16}
          \PYG{l+m}{17}
          \PYG{l+m}{18}
          \PYG{l+m}{19}
          \PYG{l+m}{20}
          \PYG{l+m}{21}
          \PYG{l+m}{22}
          \PYG{l+m}{24}
          \PYG{l+m}{26}
          \PYG{l+m}{27}
          \PYG{l+m}{29}
          \PYG{l+m}{30}
          \PYG{l+m}{32}
          \PYG{l+m}{34}
          \PYG{l+m}{36}
          \PYG{l+m}{37}
          \PYG{l+m}{38}
          \PYG{l+m}{39}
          \PYG{l+m}{40}
          \PYG{l+m}{41}
          \PYG{l+m}{43}
          \PYG{l+m}{45}
          \PYG{l+m}{47}
          \PYG{l+m}{48}
          \PYG{l+m}{50}
          \PYG{l+m}{52}
          \PYG{l+m}{53}
          \PYG{l+m}{54}
          \PYG{l+m}{55}
          \PYG{l+m}{57}
          \PYG{l+m}{58}
          \PYG{l+m}{59}
          \PYG{l+m}{61}
          \PYG{l+m}{63}
          \PYG{l+m}{64}
          \PYG{l+m}{66}
          \PYG{l+m}{68}
          \PYG{l+m}{69}
          \PYG{l+m}{70}
          \PYG{l+m}{72}
          \PYG{l+m}{74}
          \PYG{l+m}{75}
          \PYG{l+m}{76}
          \PYG{l+m}{77}
          \PYG{l+m}{78}
          \PYG{l+m}{79}  ! 取为5\PYGZhy{}epsilon/epsilon.inp中number\PYGZus{}bands的值，通常比总能带数小1
Note: cannot assess whether or not highest band     \PYG{l+m}{80} is degenerate.

\PYG{o}{=}\PYG{o}{=} Degeneracy\PYGZhy{}allowed numbers of valence bands \PYG{o}{(}\PYG{k}{for} inteqp, kernel, and absorption\PYG{o}{)} \PYG{o}{=}\PYG{o}{=}
           \PYG{l+m}{2}
           \PYG{l+m}{4}
           \PYG{l+m}{5}
           \PYG{l+m}{6}
           \PYG{l+m}{7}
           \PYG{n+nv}{8}

\PYG{o}{=}\PYG{o}{=} Degeneracy\PYGZhy{}allowed numbers of conduction bands \PYG{o}{(}\PYG{k}{for} inteqp, kernel, and absorption\PYG{o}{)} \PYG{o}{=}\PYG{o}{=}
           \PYG{l+m}{1}
           \PYG{l+m}{2}
           \PYG{l+m}{3}
           \PYG{l+m}{5}
           \PYG{l+m}{7}
           \PYG{l+m}{8}
           \PYG{l+m}{9}
          \PYG{l+m}{10}
          \PYG{l+m}{11}
          \PYG{l+m}{12}
          \PYG{l+m}{13}
          \PYG{l+m}{14}
          \PYG{l+m}{16}
          \PYG{l+m}{18}
          \PYG{l+m}{19}
          \PYG{l+m}{21}
          \PYG{l+m}{22}
          \PYG{l+m}{24}
          \PYG{l+m}{26}
          \PYG{l+m}{28}
          \PYG{l+m}{29}
          \PYG{l+m}{30}
          \PYG{l+m}{31}
          \PYG{l+m}{32}
          \PYG{l+m}{33}
          \PYG{l+m}{35}
          \PYG{l+m}{37}
          \PYG{l+m}{39}
          \PYG{l+m}{40}
          \PYG{l+m}{42}
          \PYG{l+m}{44}
          \PYG{l+m}{45}
          \PYG{l+m}{46}
          \PYG{l+m}{47}
          \PYG{l+m}{49}
          \PYG{l+m}{50}
          \PYG{l+m}{51}
          \PYG{l+m}{53}
          \PYG{l+m}{55}
          \PYG{l+m}{56}
          \PYG{l+m}{58}
          \PYG{l+m}{60}
          \PYG{l+m}{61}
          \PYG{l+m}{62}
          \PYG{l+m}{64}
          \PYG{l+m}{66}
          \PYG{l+m}{67}
          \PYG{l+m}{68}
          \PYG{l+m}{69}
          \PYG{l+m}{70}
          \PYG{l+m}{71}
Note: cannot assess whether or not highest conduction band     \PYG{l+m}{72} is degenerate.
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
修改pp\_in文件

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{5}
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{5}
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{1}
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{rhog\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{rhog\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}rho.cplx\PYGZsq{}}
   \PYG{n+nv}{vxcg\PYGZus{}flag} \PYG{o}{=} .false.
   \PYG{n+nv}{vxcg\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}vxc.cplx\PYGZsq{}}
   \PYG{n+nv}{vxc\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{vxc\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}vxc.dat\PYGZsq{}}
   \PYG{n+nv}{vxc\PYGZus{}diag\PYGZus{}nmin} \PYG{o}{=} \PYG{l+m}{4}         ! 见Note说明
   \PYG{n+nv}{vxc\PYGZus{}diag\PYGZus{}nmax} \PYG{o}{=} \PYG{l+m}{13}        ! 见Note说明
   \PYG{n+nv}{vxc\PYGZus{}offdiag\PYGZus{}nmin} \PYG{o}{=} \PYG{l+m}{0}
   \PYG{n+nv}{vxc\PYGZus{}offdiag\PYGZus{}nmax} \PYG{o}{=} \PYG{l+m}{0}
/
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{注解:}
\sphinxAtStartPar
vxc\_diag\_nmin取价带顶下约5\sphinxhyphen{}10条带，其中取的最下面的一条带要求与下面的带连续，例如取的最下面的带是4，则下一条必须是3

\sphinxAtStartPar
vxc\_diag\_nmax取导带顶上约5\sphinxhyphen{}10条带，其中取的最上面的一条带要求与上面的带连续，例如取的最上面的带是13，则再上一条带必须是14
\end{sphinxadmonition}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务重新计算

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\PYG{c+c1}{\PYGZsh{} mpirun \PYGZhy{}np 40 /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk 1  \PYGZhy{}in ./input \PYGZam{}\PYGZgt{} ./out}
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
\PYG{c+c1}{\PYGZsh{}rm ./*.wfc*}
\PYG{c+c1}{\PYGZsh{}rm ./*.igk*}
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{3\sphinxhyphen{}wfnq}
\label{\detokenize{tutorials/berkeleygw/gw:wfnq}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{p}{\PYGZam{}}CONTROL
                       \PYG{n+nv}{title} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                 \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}bands\PYGZsq{}} ,
                \PYG{n+nv}{restart\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}from\PYGZus{}scratch\PYGZsq{}} ,
                  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false. ,
                      \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                     \PYG{n+nv}{tstress} \PYG{o}{=} .false. ,
                     \PYG{n+nv}{tprnfor} \PYG{o}{=} .false. ,
 /
 \PYG{p}{\PYGZam{}}SYSTEM
                        \PYG{n+nv}{ibrav} \PYG{o}{=}\PYG{l+m}{0},
                         \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4},
                        \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2},
                       \PYG{n+nv}{ecutwfc} \PYG{o}{=}\PYG{l+m}{40},
                       \PYG{n+nv}{nbnd} \PYG{o}{=} \PYG{l+m}{8},     ! 设置为占据态数目

 /
 \PYG{p}{\PYGZam{}}ELECTRONS
            \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{100}
            \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=} \PYG{l+m}{1}.0d\PYGZhy{}7
            \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
            \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=} \PYG{l+m}{0}.4
         \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
          \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
          \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000
K\PYGZus{}POINTS crystal  ! 来源于0\PYGZhy{}kgrid/WFNq.out中的k点
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pp\_in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}             ! 体系名称
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{5}              ! 与WFNq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{5}              ! 与WFNq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{1}              ! 与WFNq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.005          ! k点乘以0.001
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{1}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
rm ./*.wfc*
rm ./*.igk*
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{5\sphinxhyphen{}wfn\_fi}
\label{\detokenize{tutorials/berkeleygw/gw:wfn-fi}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{p}{\PYGZam{}}CONTROL
                       \PYG{n+nv}{title} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                 \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}bands\PYGZsq{}} ,
                \PYG{n+nv}{restart\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}from\PYGZus{}scratch\PYGZsq{}} ,
                  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false. ,
                      \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                     \PYG{n+nv}{tstress} \PYG{o}{=} .false. ,
                     \PYG{n+nv}{tprnfor} \PYG{o}{=} .false. ,
 /
 \PYG{p}{\PYGZam{}}SYSTEM
                        \PYG{n+nv}{ibrav} \PYG{o}{=}\PYG{l+m}{0},
                         \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4},
                        \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2},
                       \PYG{n+nv}{ecutwfc} \PYG{o}{=}\PYG{l+m}{40},
                       \PYG{n+nv}{nbnd} \PYG{o}{=} \PYG{l+m}{80},        !占据态乘以10


 /
 \PYG{p}{\PYGZam{}}ELECTRONS
            \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{100}
            \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=} \PYG{l+m}{1}.0d\PYGZhy{}7
            \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
            \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=} \PYG{l+m}{0}.4
         \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
          \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
          \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000
K\PYGZus{}POINTS crystal  ! k点来源于0\PYGZhy{}kgrid/WFN\PYGZus{}fi.out
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pp\_in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{7}            ! 与WFN\PYGZus{}fi.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{7}            ! 与WFN\PYGZus{}fi.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{1}            ! 与WFN\PYGZus{}fi.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
/
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{1}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
rm ./*.wfc*
rm ./*.igk*
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{6\sphinxhyphen{}wfn\_fiq}
\label{\detokenize{tutorials/berkeleygw/gw:wfn-fiq}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{p}{\PYGZam{}}CONTROL
                       \PYG{n+nv}{title} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                 \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}bands\PYGZsq{}} ,
                \PYG{n+nv}{restart\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}from\PYGZus{}scratch\PYGZsq{}} ,
                  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false. ,
                      \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}} ,
                      \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}} ,
                     \PYG{n+nv}{tstress} \PYG{o}{=} .false. ,
                     \PYG{n+nv}{tprnfor} \PYG{o}{=} .false. ,
 /
 \PYG{p}{\PYGZam{}}SYSTEM
                        \PYG{n+nv}{ibrav} \PYG{o}{=}\PYG{l+m}{0},
                         \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4},
                        \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2},
                       \PYG{n+nv}{ecutwfc} \PYG{o}{=}\PYG{l+m}{40},
                       \PYG{n+nv}{nbnd} \PYG{o}{=} \PYG{l+m}{8},     ! 设置为占据态

 /
 \PYG{p}{\PYGZam{}}ELECTRONS
            \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{100}
            \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=} \PYG{l+m}{1}.0d\PYGZhy{}7
            \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
            \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=} \PYG{l+m}{0}.4
         \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
          \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
          \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000
K\PYGZus{}POINTS crystal   ! k点来源于0\PYGZhy{}kgrid/WFN\PYGZus{}fiq.out
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pp\_in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{7}            ! 与WFN\PYGZus{}fiq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{7}            ! 与WFN\PYGZus{}fiq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{1}            ! 与WFN\PYGZus{}fiq.in设置相同
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.007        ! k点乘以0.001
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.007        ! k点乘以0.001
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
/
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务的脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{1}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
rm ./*.wfc*
rm ./*.igk*
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{7\sphinxhyphen{}band}
\label{\detokenize{tutorials/berkeleygw/gw:band}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}CONTROL
  \PYG{n+nv}{calculation} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}bands\PYGZsq{}}
  \PYG{n+nv}{etot\PYGZus{}conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d\PYGZhy{}05
  \PYG{n+nv}{forc\PYGZus{}conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{1}.0000000000d\PYGZhy{}04
  \PYG{n+nv}{outdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
  \PYG{n+nv}{pseudo\PYGZus{}dir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{wfcdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}./\PYGZsq{}}
  \PYG{n+nv}{tprnfor} \PYG{o}{=} .false.
  \PYG{n+nv}{tstress} \PYG{o}{=} .false.
  \PYG{n+nv}{verbosity} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}high\PYGZsq{}}
  \PYG{n+nv}{wf\PYGZus{}collect} \PYG{o}{=} .false.
/
\PYG{p}{\PYGZam{}}SYSTEM
  \PYG{n+nv}{ecutwfc} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d+01
  \PYG{n+nv}{ibrav} \PYG{o}{=} \PYG{l+m}{0}
  \PYG{n+nv}{nat} \PYG{o}{=} \PYG{l+m}{4}
  \PYG{n+nv}{ntyp} \PYG{o}{=} \PYG{l+m}{2}
  \PYG{n+nv}{nbnd} \PYG{o}{=} \PYG{l+m}{80}                   ! 占据态乘以10
/
\PYG{p}{\PYGZam{}}ELECTRONS
  \PYG{n+nv}{conv\PYGZus{}thr} \PYG{o}{=}   \PYG{l+m}{1}.0000000000d\PYGZhy{}7
  \PYG{n+nv}{electron\PYGZus{}maxstep} \PYG{o}{=} \PYG{l+m}{80}
  \PYG{n+nv}{mixing\PYGZus{}beta} \PYG{o}{=}   \PYG{l+m}{4}.0000000000d\PYGZhy{}01
  \PYG{n+nv}{mixing\PYGZus{}mode} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}plain\PYGZsq{}}
  \PYG{n+nv}{diagonalization} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}david\PYGZsq{}}
  \PYG{n+nv}{diago\PYGZus{}david\PYGZus{}ndim} \PYG{o}{=} \PYG{l+m}{8}
  \PYG{n+nv}{diago\PYGZus{}full\PYGZus{}acc} \PYG{o}{=} .true.
/
ATOMIC\PYGZus{}SPECIES
B      \PYG{l+m}{10}.811 B.SG15.PBE.UPF
N      \PYG{l+m}{14}.0067 N.SG15.PBE.UPF
ATOMIC\PYGZus{}POSITIONS crystal
B            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.7500000000
B            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.2500000000
N            \PYG{l+m}{0}.3333333300       \PYG{l+m}{0}.6666666700       \PYG{l+m}{0}.7500000000
CELL\PYGZus{}PARAMETERS angstrom
      \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000
     \PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000
      \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000

K\PYGZus{}POINTS crystal \PYG{o}{\PYGZob{}}crystal\PYGZus{}b\PYG{o}{\PYGZcb{}} ! 能带计算的高对称点路径
  \PYG{l+m}{4}
  \PYG{l+m}{0}      \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{50}
  \PYG{l+m}{0}.5    \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{50}
  \PYG{l+m}{0}.3333 \PYG{l+m}{0}.3333 \PYG{l+m}{0}  \PYG{l+m}{50}
  \PYG{l+m}{0}      \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{0}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
pp\_in

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZam{}}input\PYGZus{}pw2bgw
   \PYG{n+nv}{prefix} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}BN\PYGZsq{}}
   \PYG{n+nv}{real\PYGZus{}or\PYGZus{}complex} \PYG{o}{=} \PYG{l+m}{2}
   \PYG{n+nv}{wfng\PYGZus{}flag} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}file} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}wfn.complex\PYGZsq{}}
   \PYG{n+nv}{wfng\PYGZus{}kgrid} \PYG{o}{=} .true.
   \PYG{n+nv}{wfng\PYGZus{}nk1} \PYG{o}{=} \PYG{l+m}{0}
   \PYG{n+nv}{wfng\PYGZus{}nk2} \PYG{o}{=} \PYG{l+m}{0}
   \PYG{n+nv}{wfng\PYGZus{}nk3} \PYG{o}{=} \PYG{l+m}{0}
   \PYG{n+nv}{wfng\PYGZus{}dk1} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk2} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}dk3} \PYG{o}{=} \PYG{l+m}{0}.0
   \PYG{n+nv}{wfng\PYGZus{}occupation}\PYG{o}{=}.ture
   \PYG{n+nv}{wfng\PYGZus{}nvmin}\PYG{o}{=}\PYG{l+m}{1}          ! 价带最小值，一般设置为1
   \PYG{n+nv}{wfng\PYGZus{}nvmax}\PYG{o}{=} \PYG{l+m}{8}         ! 价带最大值，也就是占据态
/
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}


\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/parallel\PYGZus{}studio\PYGZus{}xe\PYGZus{}2019/psxevars.sh

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw.x \PYGZhy{}nk \PYG{l+m}{1}  \PYGZhy{}in ./input \PYG{p}{\PYGZam{}}\PYGZgt{} ./out
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/qe\PYGZhy{}6.5/bin/pw2bgw.x \PYGZhy{}in ./pp\PYGZus{}in \PYG{p}{\PYGZam{}}\PYGZgt{} ./pp\PYGZus{}out
rm ./*.wfc*
rm ./*.igk*
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\subsubsection{BerkeleyGW计算}
\label{\detokenize{tutorials/berkeleygw/gw:berkeleygw}}

\paragraph{5\sphinxhyphen{}epsilon}
\label{\detokenize{tutorials/berkeleygw/gw:epsilon}}\begin{itemize}
\item {} 
\sphinxAtStartPar
epsilon.inp

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
epsilon\PYGZus{}cutoff \PYG{l+m}{10}          ! 不需要修改
number\PYGZus{}bands \PYG{l+m}{79}            ! 取2\PYGZhy{}wfn/aa中能带的最大值
band\PYGZus{}occupation \PYG{l+m}{8}*1 \PYG{l+m}{71}*0   ! 价带*1，导带*0
cell\PYGZus{}slab\PYGZus{}truncation

begin qpoints ! 来源于WFN.out，最后加1列，第一行为1，其余都是0
  \PYG{l+m}{0}.001000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{1} ! 第一个数改为0.001
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
end
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}

\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/mkl/bin/mklvars.sh intel64
\PYG{n+nb}{export} \PYG{n+nv}{PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}PATH}:/home/gengzi/apps/openmpi404/bin
\PYG{n+nb}{export} \PYG{n+nv}{LD\PYGZus{}LIBRARY\PYGZus{}PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}LD\PYGZus{}LIBRARY\PYGZus{}PATH}:/home/gengzi/apps/openmpi404/lib

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/epsilon.cplx.x \PYG{p}{\PYGZam{}}\PYGZgt{} ./OUT.eps
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{6\sphinxhyphen{}sigma}
\label{\detokenize{tutorials/berkeleygw/gw:sigma}}\begin{itemize}
\item {} 
\sphinxAtStartPar
sigma.inp

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
screened\PYGZus{}coulomb\PYGZus{}cutoff \PYG{l+m}{10}
bare\PYGZus{}coulomb\PYGZus{}cutoff \PYG{l+m}{70}

number\PYGZus{}bands \PYG{l+m}{79}
band\PYGZus{}occupation \PYG{l+m}{8}*1 \PYG{l+m}{71}*0
\PYG{c+c1}{\PYGZsh{}frequency\PYGZus{}dependence 1}
\PYG{c+c1}{\PYGZsh{}no\PYGZus{}symmetries\PYGZus{}q\PYGZus{}grid}
band\PYGZus{}index\PYGZus{}min  \PYG{l+m}{4}  ! 取为2\PYGZhy{}wfn/pp\PYGZus{}in中的vxc\PYGZus{}diag\PYGZus{}nmin值
band\PYGZus{}index\PYGZus{}max  \PYG{l+m}{13} ! 取为2\PYGZhy{}wfn/pp\PYGZus{}in中的vxc\PYGZus{}diag\PYGZus{}nmax值
cell\PYGZus{}slab\PYGZus{}truncation

screening\PYGZus{}semiconductor
begin kpoints ! k点来源于WFN.out，最后加一列，第一行为1，其余都是0
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{1}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.200000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.400000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.600000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.800000000  \PYG{l+m}{0}.000000000   \PYG{l+m}{1}.0 \PYG{l+m}{0}
end
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}

\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/mkl/bin/mklvars.sh intel64
\PYG{n+nb}{export} \PYG{n+nv}{PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}PATH}:/home/gengzi/apps/openmpi404/bin
\PYG{n+nb}{export} \PYG{n+nv}{LD\PYGZus{}LIBRARY\PYGZus{}PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}LD\PYGZus{}LIBRARY\PYGZus{}PATH}:/home/gengzi/apps/openmpi404/lib

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/sigma.cplx.x \PYG{p}{\PYGZam{}}\PYGZgt{} ./OUT.eps

python eqp.py  eqp1  sigma\PYGZus{}hp.log ../8\PYGZhy{}absorption/eqp\PYGZus{}co.dat
python eqp.py  eqp1  sigma\PYGZus{}hp.log ../9\PYGZhy{}inteqp/eqp\PYGZus{}co.dat

date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{注解:}
\sphinxAtStartPar
eqp.py脚本位于安装文件bin文件夹中，使用python3环境
\end{sphinxadmonition}


\paragraph{7\sphinxhyphen{}kernel}
\label{\detokenize{tutorials/berkeleygw/gw:kernel}}\begin{itemize}
\item {} 
\sphinxAtStartPar
kernel.inp

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
number\PYGZus{}val\PYGZus{}bands  \PYG{l+m}{5} ! 画图时包含的价带数
number\PYGZus{}cond\PYGZus{}bands \PYG{l+m}{5} ! 画图时包含的导带数

screened\PYGZus{}coulomb\PYGZus{}cutoff \PYG{l+m}{10}
bare\PYGZus{}coulomb\PYGZus{}cutoff  \PYG{l+m}{70}

use\PYGZus{}symmetries\PYGZus{}coarse\PYGZus{}grid

screening\PYGZus{}semiconductor
cell\PYGZus{}slab\PYGZus{}truncation
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}

\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/mkl/bin/mklvars.sh intel64
\PYG{n+nb}{export} \PYG{n+nv}{PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}PATH}:/home/gengzi/apps/openmpi404/bin
\PYG{n+nb}{export} \PYG{n+nv}{LD\PYGZus{}LIBRARY\PYGZus{}PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}LD\PYGZus{}LIBRARY\PYGZus{}PATH}:/home/gengzi/apps/openmpi404/lib

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/kernel.cplx.x \PYG{p}{\PYGZam{}}\PYGZgt{} ./OUT.eps
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{8\sphinxhyphen{}absorption}
\label{\detokenize{tutorials/berkeleygw/gw:absorption}}\begin{itemize}
\item {} 
\sphinxAtStartPar
absorption.inp

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
number\PYGZus{}val\PYGZus{}bands\PYGZus{}coarse \PYG{l+m}{5}  ! 画图时包含的价带数
number\PYGZus{}val\PYGZus{}bands\PYGZus{}fine \PYG{l+m}{5}    ! 画图时包含的价带数
number\PYGZus{}cond\PYGZus{}bands\PYGZus{}coarse \PYG{l+m}{5} ! 画图时包含的导带数
number\PYGZus{}cond\PYGZus{}bands\PYGZus{}fine \PYG{l+m}{5}   ! 画图时包含的导带数

use\PYGZus{}symmetries\PYGZus{}fine\PYGZus{}grid
use\PYGZus{}symmetries\PYGZus{}shifted\PYGZus{}grid
use\PYGZus{}symmetries\PYGZus{}coarse\PYGZus{}grid
diagonalization
screening\PYGZus{}semiconductor
cell\PYGZus{}slab\PYGZus{}truncation
\PYG{c+c1}{\PYGZsh{}use\PYGZus{}velocity}

eqp\PYGZus{}co\PYGZus{}corrections
\PYG{c+c1}{\PYGZsh{}q\PYGZus{}shift 0.0006 0.0006 0.000}
use\PYGZus{}momentum
polarization \PYG{l+m}{1}.0 \PYG{l+m}{0}.0 \PYG{l+m}{0}.0

energy\PYGZus{}resolution \PYG{l+m}{0}.05
gaussian\PYGZus{}broadening
\PYG{c+c1}{\PYGZsh{}write\PYGZus{}eigenvectors 10}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}

\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/mkl/bin/mklvars.sh intel64
\PYG{n+nb}{export} \PYG{n+nv}{PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}PATH}:/home/gengzi/apps/openmpi404/bin
\PYG{n+nb}{export} \PYG{n+nv}{LD\PYGZus{}LIBRARY\PYGZus{}PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}LD\PYGZus{}LIBRARY\PYGZus{}PATH}:/home/gengzi/apps/openmpi404/lib

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/absorption.cplx.x \PYG{p}{\PYGZam{}}\PYGZgt{} ./OUT.eps
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}


\paragraph{9\sphinxhyphen{}inteqp}
\label{\detokenize{tutorials/berkeleygw/gw:inteqp}}\begin{itemize}
\item {} 
\sphinxAtStartPar
inteqp.inp

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
number\PYGZus{}val\PYGZus{}bands\PYGZus{}coarse \PYG{l+m}{5}  ! 画图时包含的价带数
number\PYGZus{}val\PYGZus{}bands\PYGZus{}fine \PYG{l+m}{5}    ! 画图时包含的价带数
number\PYGZus{}cond\PYGZus{}bands\PYGZus{}coarse \PYG{l+m}{5} ! 画图时包含的导带数
number\PYGZus{}cond\PYGZus{}bands\PYGZus{}fine \PYG{l+m}{5}   ! 画图时包含的导带数

\PYG{c+c1}{\PYGZsh{}use\PYGZus{}symmetries\PYGZus{}fine\PYGZus{}grid}
\PYG{c+c1}{\PYGZsh{}no\PYGZus{}symmetries\PYGZus{}shifted\PYGZus{}grid}
\PYG{c+c1}{\PYGZsh{}use\PYGZus{}symmetries\PYGZus{}coarse\PYGZus{}grid}
use\PYGZus{}momentum
\PYG{c+c1}{\PYGZsh{}comm\PYGZus{}mpi}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/bin/sh}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}N hey}
\PYG{c+c1}{\PYGZsh{}PBS \PYGZhy{}l nodes=1:ppn=40,walltime=500:00:00}
\PYG{c+c1}{\PYGZsh{}\PYGZsh{}PBS \PYGZhy{}q workq}

\PYG{n+nb}{cd} \PYG{n+nv}{\PYGZdl{}PBS\PYGZus{}O\PYGZus{}WORKDIR}
\PYG{n+nb}{source} /home/gengzi/apps/intel/19/mkl/bin/mklvars.sh intel64
\PYG{n+nb}{export} \PYG{n+nv}{PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}PATH}:/home/gengzi/apps/openmpi404/bin
\PYG{n+nb}{export} \PYG{n+nv}{LD\PYGZus{}LIBRARY\PYGZus{}PATH}\PYG{o}{=}\PYG{n+nv}{\PYGZdl{}LD\PYGZus{}LIBRARY\PYGZus{}PATH}:/home/gengzi/apps/openmpi404/lib

date \PYG{l+s+s2}{\PYGZdq{}+01 Today\PYGZsq{}s date is: \PYGZpc{}D. The time execution \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
mpirun \PYGZhy{}np \PYG{l+m}{40} /home/gengzi/apps/BerkeleyGW\PYGZhy{}2.1/bin/inteqp.cplx.x \PYG{p}{\PYGZam{}}\PYGZgt{} ./OUT.inteqp
date \PYG{l+s+s2}{\PYGZdq{}+02 Today\PYGZsq{}s date is: \PYGZpc{}D. The time finish \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} time.info
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
提交任务完成计算，得到`bandstructure.dat`文件

\end{itemize}


\subsubsection{数据处理}
\label{\detokenize{tutorials/berkeleygw/gw:id2}}\begin{itemize}
\item {} 
\sphinxAtStartPar
kline.py (刘仕明开发)

\item {} 
\sphinxAtStartPar
klable.txt

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+m}{2}.5124282300       \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000 !晶格常数
\PYGZhy{}1.2562141150       \PYG{l+m}{2}.1758266724       \PYG{l+m}{0}.0000000000 !晶格常数
 \PYG{l+m}{0}.0000000000       \PYG{l+m}{0}.0000000000       \PYG{l+m}{7}.7072650000 !晶格常数
 \PYG{l+m}{4} ! 能带路径设置
 \PYG{l+m}{0}      \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{50}
 \PYG{l+m}{0}.5    \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{50}
 \PYG{l+m}{0}.3333 \PYG{l+m}{0}.3333 \PYG{l+m}{0}  \PYG{l+m}{50}
 \PYG{l+m}{0}      \PYG{l+m}{0}      \PYG{l+m}{0}  \PYG{l+m}{0}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
bandstructure.dat

\item {} 
\sphinxAtStartPar
运行脚本

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{python3} \PYG{n}{kline}\PYG{o}{.}\PYG{n}{py}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
得到kline.dat文件，画图即可

\end{itemize}


\section{Quantum\sphinxhyphen{}ESPRESSO}
\label{\detokenize{tutorial:quantum-espresso}}

\section{EPW}
\label{\detokenize{tutorial:epw}}

\subsection{NSCF Kpoints}
\label{\detokenize{tutorials/epw/basic:nscf-kpoints}}\label{\detokenize{tutorials/epw/basic::doc}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Generate by Python script

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+ch}{\PYGZsh{}!/usr/bin/env python3}

\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{n}{f} \PYG{o}{=} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./nscf.txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{n}{X} \PYG{o}{=} \PYG{l+m+mi}{6}
\PYG{n}{Y} \PYG{o}{=} \PYG{l+m+mi}{6}
\PYG{n}{Z} \PYG{o}{=} \PYG{l+m+mi}{6}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{K\PYGZus{}POINTS crystal}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{file} \PYG{o}{=} \PYG{n}{f}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{X} \PYG{o}{*} \PYG{n}{Y} \PYG{o}{*} \PYG{n}{Z}\PYG{p}{,} \PYG{n}{file} \PYG{o}{=} \PYG{n}{f}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{ii} \PYG{o+ow}{in} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{o}{/}\PYG{n}{X}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{jj} \PYG{o+ow}{in} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{o}{/}\PYG{n}{Y}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{kk} \PYG{o+ow}{in} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{p}{,}\PYG{l+m+mf}{1.0}\PYG{o}{/}\PYG{n}{Z}\PYG{p}{)}\PYG{p}{:}
            \PYG{c+c1}{\PYGZsh{} print(\PYGZsq{}\PYGZpc{}.10f\PYGZsq{} \PYGZpc{}(ii), \PYGZsq{} \PYGZsq{}, \PYGZsq{}\PYGZpc{}.10f\PYGZsq{} \PYGZpc{}(jj), \PYGZsq{} \PYGZsq{}, \PYGZsq{}\PYGZpc{}.10f\PYGZsq{} \PYGZpc{}(kk), \PYGZsq{} \PYGZsq{}, \PYGZsq{}\PYGZpc{}.10f\PYGZsq{} \PYGZpc{}(1.0 / (X * Y * Z)))}
            \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.10f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}\PYG{p}{(}\PYG{n}{ii}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.10f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}\PYG{p}{(}\PYG{n}{jj}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.10f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}\PYG{p}{(}\PYG{n}{kk}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+si}{\PYGZpc{}.10f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}}\PYG{p}{(}\PYG{l+m+mf}{1.0} \PYG{o}{/} \PYG{p}{(}\PYG{n}{X} \PYG{o}{*} \PYG{n}{Y} \PYG{o}{*} \PYG{n}{Z}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n}{file} \PYG{o}{=} \PYG{n}{f}\PYG{p}{)}
\PYG{n}{f}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Generate by kmesh.pl script, which can be found in wannier90\sphinxhyphen{}x.y.z/utility/kmesh.pl

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
./kmesh.pl \PYG{l+m}{3} \PYG{l+m}{3} \PYG{l+m}{3} \PYGZgt{}\PYGZgt{} nscf.txt
\end{sphinxVerbatim}


\section{pymatgen}
\label{\detokenize{tutorial:pymatgen}}

\subsection{Basic Module}
\label{\detokenize{tutorials/pymatgen/basic:basic-module}}\label{\detokenize{tutorials/pymatgen/basic::doc}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Lattice, Structure, Molecule Module

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{core} \PYG{k+kn}{import} \PYG{n}{Lattice}\PYG{p}{,} \PYG{n}{Structure}\PYG{p}{,} \PYG{n}{Molecule}
\PYG{c+c1}{\PYGZsh{} Read a POSCAR and write to a CIF.}
\PYG{n}{structure} \PYG{o}{=} \PYG{n}{Structure}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{POSCAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{structure}\PYG{o}{.}\PYG{n}{to}\PYG{p}{(}\PYG{n}{filename}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CsCl.cif}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Read an xyz file and write to a Gaussian Input file.}
\PYG{n}{methane} \PYG{o}{=} \PYG{n}{Molecule}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{methane.xyz}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{methane}\PYG{o}{.}\PYG{n}{to}\PYG{p}{(}\PYG{n}{filename}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{methane.gjf}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
VASP and cif Module

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{cif} \PYG{k+kn}{import} \PYG{n}{CifParser}
\PYG{c+c1}{\PYGZsh{} read structure from cif file}
\PYG{n}{parser} \PYG{o}{=} \PYG{n}{CifParser}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mycif.cif}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{structure} \PYG{o}{=} \PYG{n}{parser}\PYG{o}{.}\PYG{n}{get\PYGZus{}structures}\PYG{p}{(}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{c+c1}{\PYGZsh{} read POSCAR file and write it to cif structure}
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{vasp} \PYG{k+kn}{import} \PYG{n}{Poscar}
\PYG{k+kn}{from} \PYG{n+nn}{pymatgen}\PYG{n+nn}{.}\PYG{n+nn}{io}\PYG{n+nn}{.}\PYG{n+nn}{cif} \PYG{k+kn}{import} \PYG{n}{CifWriter}
\PYG{n}{p} \PYG{o}{=} \PYG{n}{Poscar}\PYG{o}{.}\PYG{n}{from\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POSCAR}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{w} \PYG{o}{=} \PYG{n}{CifWriter}\PYG{p}{(}\PYG{n}{p}\PYG{o}{.}\PYG{n}{structure}\PYG{p}{)}
\PYG{n}{w}\PYG{o}{.}\PYG{n}{write\PYGZus{}file}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{mystructure.cif}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Gnuplot}
\label{\detokenize{tutorial:gnuplot}}

\subsection{希腊字母表}
\label{\detokenize{tutorials/gnuplot/commands:id1}}\label{\detokenize{tutorials/gnuplot/commands::doc}}\begin{itemize}
\item {} 
\sphinxAtStartPar
用法：\{/symbol De\} 结果：Δε

\end{itemize}


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{希腊字母符号表}\label{\detokenize{tutorials/gnuplot/commands:id2}}
\sphinxaftertopcaption
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
\sphinxAtStartPar
ALPHABET
&\sphinxstyletheadfamily 
\sphinxAtStartPar
SYMBOL
&\sphinxstyletheadfamily 
\sphinxAtStartPar
ALPHABET
&\sphinxstyletheadfamily 
\sphinxAtStartPar
SYMBOL
&\sphinxstyletheadfamily 
\sphinxAtStartPar
alphabet
&\sphinxstyletheadfamily 
\sphinxAtStartPar
symbol
&\sphinxstyletheadfamily 
\sphinxAtStartPar
alphabet
&\sphinxstyletheadfamily 
\sphinxAtStartPar
symbol
\\
\hline
\sphinxAtStartPar
A
&
\sphinxAtStartPar
Alpha
&
\sphinxAtStartPar
N
&
\sphinxAtStartPar
Nu
&
\sphinxAtStartPar
a
&
\sphinxAtStartPar
alpha
&
\sphinxAtStartPar
n
&
\sphinxAtStartPar
nu
\\
\hline
\sphinxAtStartPar
B
&
\sphinxAtStartPar
Beta
&
\sphinxAtStartPar
O
&
\sphinxAtStartPar
Omicron
&
\sphinxAtStartPar
b
&
\sphinxAtStartPar
beta
&
\sphinxAtStartPar
o
&
\sphinxAtStartPar
omicron
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Atomic Simulation Environment (ASE)}
\label{\detokenize{tutorial:atomic-simulation-environment-ase}}

\subsection{Install}
\label{\detokenize{tutorials/ase/basic:install}}\label{\detokenize{tutorials/ase/basic::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip install \PYGZhy{}\PYGZhy{}upgrade \PYGZhy{}\PYGZhy{}user ase
pip install \PYGZhy{}\PYGZhy{}upgrade \PYGZhy{}\PYGZhy{}user ase\PYG{o}{[}test\PYG{o}{]}
\end{sphinxVerbatim}


\chapter{database}
\label{\detokenize{database:database}}\label{\detokenize{database::doc}}

\section{无机材料数据库}
\label{\detokenize{database:id1}}

\subsection{三维材料数据库}
\label{\detokenize{database/inorganic:id1}}\label{\detokenize{database/inorganic::doc}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxhref{https://www.materialsproject.org/}{Materials Project}%
\begin{footnote}[29]\sphinxAtStartFootnote
\sphinxnolinkurl{https://www.materialsproject.org/}
%
\end{footnote}

\item {} 
\sphinxAtStartPar
\sphinxhref{https://icsd.fiz-karlsruhe.de/search/}{ICSD}%
\begin{footnote}[30]\sphinxAtStartFootnote
\sphinxnolinkurl{https://icsd.fiz-karlsruhe.de/search/}
%
\end{footnote}

\end{enumerate}


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{索引}
\printindex
\end{document}